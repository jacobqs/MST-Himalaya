<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>shyft.time_series &mdash; Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/bootstrap-grid.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../../_static/js/bootstrap.min.js"></script>
        <script src="../../_static/js/bootstrap.bundle.min.js"></script>
        <script src="../../_static/js/custom.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Package shyft" href="../hydrology/installation.html" />
    <link rel="prev" title="&lt;no title&gt;" href="../../notebooks/time_series/dtss-krls-container.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Shyft
          </a>
              <div class="version">
                4.12
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project/what_is_shyft.html">What is Shyft?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/get_involved.html">Get involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/contact.html">Contact</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Time Series</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#time">Time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#function-utctime-now">Function utctime_now</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-deltahours">Function deltahours</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-deltaminutes">Function deltaminutes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-time">Class time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-ymdhms">Class YMDhms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-ywdhms">Class YWdhms</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-tzinfo">Class TzInfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-calendar">Class Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-utcperiod">Class UtcPeriod</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-utctimevector">Class UtcTimeVector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#time-series">Time series</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#class-timeaxis">Class TimeAxis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-timeseries">Class TimeSeries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-tsvector">Class TsVector</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#time-series-expressions">Time series expressions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#class-tsbindinfo">Class TsBindInfo</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dtss-the-distributed-time-series-system">DTSS - The Distributed Time series System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#class-dtsserver">Class DtsServer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-dtsclient">Class DtsClient</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-tsinfo">Class TsInfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-cachestats">Class CacheStats</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#geo-location-time-series">Geo-location Time series</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#class-geopoint">Class GeoPoint</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-geotimeseries">Class GeoTimeSeries</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-geotimeseriesvector">Class GeoTimeSeriesVector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-geoquery">Class GeoQuery</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-geoslice">Class GeoSlice</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-geotsmatrix">Class GeoTsMatrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-geomatrixshape">Class GeoMatrixShape</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-geogridspec">Class GeoGridSpec</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-geoevalargs">Class GeoEvalArgs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#class-geotimeseriesconfiguration">Class GeoTimeSeriesConfiguration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-time-series">Working with time series</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#policies">Policies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#class-convolve-policy">Class convolve_policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-derivative-method">Class derivative_method</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-extend-fill-policy">Class extend_fill_policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-extend-split-policy">Class extend_split_policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-interpolation-scheme">Class interpolation_scheme</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-point-interpretation-policy">Class point_interpretation_policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-trim-policy">Class trim_policy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#tools">Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#class-krlsrbfpredictor">Class KrlsRbfPredictor</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-qacparameter">Class QacParameter</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hydrology">Hydrology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#class-icepackingparameters">Class IcePackingParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-icepackingrecessionparameters">Class IcePackingRecessionParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-ice-packing-temperature-policy">Class ice_packing_temperature_policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-ratingcurvefunction">Class RatingCurveFunction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-ratingcurveparameters">Class RatingCurveParameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-ratingcurvesegment">Class RatingCurveSegment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-ratingcurvesegments">Class RatingCurveSegments</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-ratingcurvetimefunction">Class RatingCurveTimeFunction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#class-ratingcurvetimefunctions">Class RatingCurveTimeFunctions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Hydrology</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hydrology/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hydrology/concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hydrology/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hydrology/api.html">API Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Energy Market</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../energy_market/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy_market/concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy_market/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../energy_market/api.html">API Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Dashboard</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dashboard/api.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Shyft</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>shyft.time_series</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/content/time_series/api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="shyft-time-series">
<h1>shyft.time_series<a class="headerlink" href="#shyft-time-series" title="Permalink to this headline"></a></h1>
<p>This package contains the following classes and functions to use
by end-users. The namespace itself contains more classes and functions,
but these are used internally.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>Vector types</strong>
Because the actual code is written in C++ which is strongly typed,
Shyft Python code uses the concept of “vector” classes which are basically
lists of the named type e.g. <em>TsBindInfo</em> and <em>TsBindInfoVector</em>. These are
not specifically documented here.</p>
<p>However, some vector types like <em>TsVector</em> are documented, because they
provide more functionality than a simple list.</p>
</div>
<div class="section" id="time">
<h2>Time<a class="headerlink" href="#time" title="Permalink to this headline"></a></h2>
<p>Elements in this category deal with date/time.</p>
<div class="section" id="function-utctime-now">
<h3>Function utctime_now<a class="headerlink" href="#function-utctime-now" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.utctime_now">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">utctime_now</span></span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.utctime_now" title="Permalink to this definition"></a></dt>
<dd><p>returns time now as seconds since 1970s</p>
</dd></dl>

</div>
<div class="section" id="function-deltahours">
<h3>Function deltahours<a class="headerlink" href="#function-deltahours" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.deltahours">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">deltahours</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(int)n</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.deltahours" title="Permalink to this definition"></a></dt>
<dd><p>returns time equal to specified n hours</p>
</dd></dl>

</div>
<div class="section" id="function-deltaminutes">
<h3>Function deltaminutes<a class="headerlink" href="#function-deltaminutes" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.deltaminutes">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">deltaminutes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(int)n</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.deltaminutes" title="Permalink to this definition"></a></dt>
<dd><p>returns time equal to specified n minutes</p>
</dd></dl>

</div>
<div class="section" id="class-time">
<h3>Class time<a class="headerlink" href="#class-time" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.time">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">time</span></span><a class="headerlink" href="#shyft.time_series.time" title="Permalink to this definition"></a></dt>
<dd><p><strong>time</strong> is represented as a number, in SI-unit seconds.</p>
<p>For accuracy and performance, it’s internally represented as 64bit integer, at micro-second resolution
It is usually used in two roles:</p>
<blockquote>
<div><ol class="arabic simple">
<li><dl class="simple">
<dt>time measured in seconds since epoch (1970.01.01UTC)</dt><dd><p>often constructed using the Calendar class that takes calendar-coordinates (YMDhms etc) and
returns the corresponding time-point, taking time-zone and dst etc. into account.</p>
</dd>
</dl>
</li>
</ol>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span>     <span class="n">utc</span> <span class="o">=</span> <span class="n">Calendar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">t1</span> <span class="o">=</span> <span class="n">utc</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">t2</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="s1">&#39;2018-10-15T16:30:15Z&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">t3</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">1539621015</span><span class="p">)</span>
</pre></div>
</div>
<blockquote>
<div><ol class="arabic simple" start="2">
<li><dl class="simple">
<dt>time measure, in unit of seconds (resolution up to 1us)</dt><dd><p>often constructed from numbers, always use SI-unit of seconds</p>
</dd>
</dl>
</li>
</ol>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span>     <span class="n">dt1</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mi">3600</span><span class="p">)</span>  <span class="c1"># 3600 seconds</span>
<span class="gp">&gt;&gt;&gt; </span>     <span class="n">dt2</span> <span class="o">=</span> <span class="n">time</span><span class="p">(</span><span class="mf">0.123456</span><span class="p">)</span>  <span class="c1">#  0.123456 seconds</span>
</pre></div>
</div>
<p>It can be constructed supplying number of seconds, or a well defined iso8601 string</p>
<p>To convert it to a python number, use float() or int() to cast operations
If dealing with time-zones/calendars conversion, use the calendar.time(..)/.calendar_units functions.
If you want to use time-zone/calendar semantic add/diff/trim, use the corresponding Calendar methods.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Calendar,deltahours,deltaminutes</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.time.now">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">now</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time"><span class="pre">time</span></a></span></span><a class="headerlink" href="#shyft.time_series.time.now" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.time.seconds">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">seconds</span></span><a class="headerlink" href="#shyft.time_series.time.seconds" title="Permalink to this definition"></a></dt>
<dd><p>returns time in seconds</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.time.sqrt">
<span class="sig-name descname"><span class="pre">sqrt</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.time.sqrt" title="Permalink to this definition"></a></dt>
<dd><p>object sqrt(tuple args, dict kwds)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-ymdhms">
<h3>Class YMDhms<a class="headerlink" href="#class-ymdhms" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.YMDhms">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">YMDhms</span></span><a class="headerlink" href="#shyft.time_series.YMDhms" title="Permalink to this definition"></a></dt>
<dd><p>Defines calendar coordinates as Year Month Day hour minute second and micro_second
The intended usage is ONLY as result from the Calendar.calendar_units(t),
to ensure a type-safe return of these entities for a given time.</p>
<blockquote>
<div><p>Please use this as a read-only return type from the Calendar.calendar_units(t)</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.YMDhms.is_null">
<span class="sig-name descname"><span class="pre">is_null</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(YMDhms)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.YMDhms.is_null" title="Permalink to this definition"></a></dt>
<dd><p>returns true if all values are 0, - the null definition</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.YMDhms.is_valid">
<span class="sig-name descname"><span class="pre">is_valid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(YMDhms)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.YMDhms.is_valid" title="Permalink to this definition"></a></dt>
<dd><p>returns true if YMDhms values are reasonable</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.YMDhms.max">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">YMDhms</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.YMDhms.max" title="Permalink to this definition"></a></dt>
<dd><p>returns the maximum representation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.YMDhms.min">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">min</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">YMDhms</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.YMDhms.min" title="Permalink to this definition"></a></dt>
<dd><p>returns the minimum representation</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-ywdhms">
<h3>Class YWdhms<a class="headerlink" href="#class-ywdhms" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.YWdhms">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">YWdhms</span></span><a class="headerlink" href="#shyft.time_series.YWdhms" title="Permalink to this definition"></a></dt>
<dd><p>Defines calendar coordinates as iso Year Week week-day hour minute second and micro_second
The intended usage is ONLY as result from the Calendar.calendar_week_units(t),
to ensure a type-safe return of these entities for a given time.</p>
<p class="rubric">Notes</p>
<p>Please use this as a read-only return type from the Calendar.calendar_week_units(t)</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.YWdhms.is_null">
<span class="sig-name descname"><span class="pre">is_null</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(YWdhms)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.YWdhms.is_null" title="Permalink to this definition"></a></dt>
<dd><p>returns true if all values are 0, - the null definition</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.YWdhms.is_valid">
<span class="sig-name descname"><span class="pre">is_valid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(YWdhms)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.YWdhms.is_valid" title="Permalink to this definition"></a></dt>
<dd><p>returns true if YWdhms values are reasonable</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.YWdhms.max">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">YWdhms</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.YWdhms.max" title="Permalink to this definition"></a></dt>
<dd><p>returns the maximum representation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.YWdhms.min">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">min</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">YWdhms</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.YWdhms.min" title="Permalink to this definition"></a></dt>
<dd><p>returns the minimum representation</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.YWdhms.week_day">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">week_day</span></span><a class="headerlink" href="#shyft.time_series.YWdhms.week_day" title="Permalink to this definition"></a></dt>
<dd><p>week_day,[1..7]=[mo..sun]</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-tzinfo">
<h3>Class TzInfo<a class="headerlink" href="#class-tzinfo" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.TzInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">TzInfo</span></span><a class="headerlink" href="#shyft.time_series.TzInfo" title="Permalink to this definition"></a></dt>
<dd><p>The TzInfo class is responsible for providing information about the
time-zone of the calendar.
This includes:</p>
<blockquote>
<div><ul class="simple">
<li><p>name (olson identifier)</p></li>
<li><p>base_offset</p></li>
<li><p>utc_offset(t) time-dependent</p></li>
</ul>
</div></blockquote>
<p>The Calendar class provides a shared pointer to it’s TzInfo object</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TzInfo.base_offset">
<span class="sig-name descname"><span class="pre">base_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TzInfo)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TzInfo.base_offset" title="Permalink to this definition"></a></dt>
<dd><p>returnes the time-invariant part of the utc-offset</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TzInfo.is_dst">
<span class="sig-name descname"><span class="pre">is_dst</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TzInfo)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TzInfo.is_dst" title="Permalink to this definition"></a></dt>
<dd><p>returns true if DST is observed at given utc-time t</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TzInfo.name">
<span class="sig-name descname"><span class="pre">name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TzInfo)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TzInfo.name" title="Permalink to this definition"></a></dt>
<dd><p>returns the olson time-zone identifier or name for the TzInfo</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TzInfo.utc_offset">
<span class="sig-name descname"><span class="pre">utc_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TzInfo)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TzInfo.utc_offset" title="Permalink to this definition"></a></dt>
<dd><p>returns the utc_offset at specified utc-time, takes DST into account if applicable</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-calendar">
<h3>Class Calendar<a class="headerlink" href="#class-calendar" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.Calendar">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">Calendar</span></span><a class="headerlink" href="#shyft.time_series.Calendar" title="Permalink to this definition"></a></dt>
<dd><p>Calendar deals with the concept of a human calendar</p>
<p>In Shyft we practice the ‘utc-time perimeter’ principle,</p>
<blockquote>
<div><ul class="simple">
<li><p>the core is utc-time exclusively</p></li>
<li><p>we deal with time-zone and calendars at the interfaces/perimeters</p></li>
</ul>
</div></blockquote>
<p>In python, this corresponds to timestamp[64], or as the integer version of the time package representation
e.g. the difference between time.time()- utctime_now() is in split-seconds</p>
<p>Calendar functionality:</p>
<blockquote>
<div><ul class="simple">
<li><p>Conversion between the calendar coordinates YMDhms or iso week YWdhms and utctime, taking  any timezone and DST into account</p></li>
<li><p>Calendar constants, utctimespan like values for Year,Month,Week,Day,Hour,Minute,Second</p></li>
<li><p>Calendar arithmetic, like adding calendar units, e.g. day,month,year etc.</p></li>
<li><p>Calendar arithmetic, like trim/truncate a utctime down to nearest timespan/calendar unit. eg. day</p></li>
<li><p>Calendar arithmetic, like calculate difference in calendar units(e.g days) between two utctime points</p></li>
<li><p>Calendar Timezone and DST handling</p></li>
<li><p>Converting time to string and vice-versa</p></li>
</ul>
</div></blockquote>
<p class="rubric">Notes</p>
<p>Please notice that although the calendar concept is complete</p>
<p>we only implement features as needed in the core and interfaces</p>
<p>Currently this includes most options, including olson time-zone handling</p>
<p>The time-zone support is currently a snapshot of rules ~2018</p>
<p>but we plan to use standard packages like Howard Hinnant’s online approach for this later.</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.add">
<span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.Calendar.add" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>object add(tuple args, dict kwds) :</dt><dd><p>This function does a calendar semantic add.</p>
<p>Conceptually this is similar to t + deltaT*n
but with deltaT equal to calendar::DAY,WEEK,MONTH,YEAR
and/or with dst enabled time-zone the variation of length due to dst
as well as month/year length is taken into account.
E.g. add one day, and calendar have dst, could give 23,24 or 25 hours due to dst.
Similar for week or any other time steps.</p>
<dl>
<dt>Args:</dt><dd><p>t (time): timestamp utc seconds since epoch</p>
<p>delta_t (time): timestep in seconds, with semantic interpretation of DAY,WEEK,MONTH,YEAR</p>
<p>n (int): number of timesteps to add</p>
</dd>
<dt>Returns:</dt><dd><p>time: t. new timestamp with the added time-steps, seconds utc since epoch</p>
</dd>
<dt>Notes:</dt><dd><p>ref. to related functions .diff_units(…) and .trim(..)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.calendar_units">
<span class="sig-name descname"><span class="pre">calendar_units</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.Calendar.calendar_units" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>object calendar_units(tuple args, dict kwds) :</dt><dd><p>returns YMDhms (.year,.month,.day,.hour,.minute..)  for specified t, in the time-zone as given by the calendar</p>
<dl class="simple">
<dt>Args:</dt><dd><p>t (time): timestamp utc seconds since epoch</p>
</dd>
<dt>Returns:</dt><dd><p>YMDhms: calendar_units. calendar units as in year-month-day hour-minute-second</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.calendar_week_units">
<span class="sig-name descname"><span class="pre">calendar_week_units</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.Calendar.calendar_week_units" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>object calendar_week_units(tuple args, dict kwds) :</dt><dd><p>returns iso YWdhms, with properties (.iso_year,.iso_week,.week_day,.hour,..)
for specified t, in the time-zone as given by the calendar</p>
<dl class="simple">
<dt>Args:</dt><dd><p>t (time): timestamp utc seconds since epoch</p>
</dd>
<dt>Returns:</dt><dd><p>YWdms: calendar_week_units. calendar units as in iso year-week-week_day hour-minute-second</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.day_of_year">
<span class="sig-name descname"><span class="pre">day_of_year</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(Calendar)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.Calendar.day_of_year" title="Permalink to this definition"></a></dt>
<dd><p>returns the day of year for the specified time</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>t</strong> (<a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time"><em>time</em></a>) – time to use for computation</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>day_of_year. in range 1..366</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.diff_units">
<span class="sig-name descname"><span class="pre">diff_units</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.Calendar.diff_units" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>object diff_units(tuple args, dict kwds) :</dt><dd><p>calculate the distance t1..t2 in specified units, taking dst into account if observed
The function takes calendar semantics when delta_t is calendar::DAY,WEEK,MONTH,YEAR,
and in addition also dst if observed.
e.g. the diff_units of calendar::DAY over summer-&gt;winter shift is 1,
even if the number of hours during those days are 23 and 25 summer and winter transition respectively.
It computes the calendar semantics of (t2-t1)/deltaT, where deltaT could be calendar units DAY,WEEK,MONTH,YEAR</p>
<dl>
<dt>Args:</dt><dd><p>t1 (time): timestamp utc seconds since epoch</p>
<p>t2 (time): timestamp utc seconds since epoch</p>
<p>delta_t (time): timestep in seconds, with semantic interpretation of DAY,WEEK,MONTH,YEAR</p>
</dd>
<dt>Returns:</dt><dd><p>int: n_units. number of units, so that t2 = c.add(t1,delta_t,n) + remainder(discarded)</p>
</dd>
<dt>Notes:</dt><dd><p>ref. to related functions .add(…) and .trim(…)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.quarter">
<span class="sig-name descname"><span class="pre">quarter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(Calendar)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.Calendar.quarter" title="Permalink to this definition"></a></dt>
<dd><p>returns the quarter of the specified t, -1 if invalid t</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>t</strong> (<em>int</em>) – timestamp utc seconds since epoch</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>quarter. in range[1..4], -1 if invalid time</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.region_id_list">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">region_id_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">StringVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.Calendar.region_id_list" title="Permalink to this definition"></a></dt>
<dd><p>Returns a list over predefined Olson time-zone identifiers</p>
<p class="rubric">Notes</p>
<p>the list is currently static and reflects tz-rules approx as of 2014</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.time">
<span class="sig-name descname"><span class="pre">time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(Calendar)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(YMDhms)YMDhms</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.Calendar.time" title="Permalink to this definition"></a></dt>
<dd><p>convert calendar coordinates into time using the calendar time-zone</p>
<blockquote>
<div><dl class="simple">
<dt>Args:</dt><dd><p>YMDhms (YMDhms): calendar cooordinate structure containg year,month,day, hour,minute,second</p>
</dd>
<dt>Returns:</dt><dd><p>int: timestamp. timestamp as in seconds utc since epoch</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>time( (Calendar)self, (YWdhms)YWdhms) -&gt; time :</dt><dd><p>convert calendar iso week coordinates structure into time using the calendar time-zone</p>
<dl class="simple">
<dt>Args:</dt><dd><p>YWdhms (YWdhms): structure containg iso specification calendar coordinates</p>
</dd>
<dt>Returns:</dt><dd><p>int: timestamp. timestamp as in seconds utc since epoch</p>
</dd>
</dl>
</dd>
<dt>time( (Calendar)self, (int)Y [, (int)M=1 [, (int)D=1 [, (int)h=0 [, (int)m=0 [, (int)s=0 [, (int)us=0]]]]]]) -&gt; time :</dt><dd><p>convert calendar coordinates into time using the calendar time-zone</p>
<dl>
<dt>Args:</dt><dd><p>Y (int): Year</p>
<p>M (int): Month  [1..12], default=1</p>
<p>D (int): Day    [1..31], default=1</p>
<p>h (int): hour   [0..23], default=0</p>
<p>m (int): minute [0..59], default=0</p>
<p>s (int): second [0..59], default=0</p>
<p>us (int): micro second[0..999999], default=0</p>
</dd>
<dt>Returns:</dt><dd><p>time: timestamp. timestamp as in seconds utc since epoch</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.time_from_week">
<span class="sig-name descname"><span class="pre">time_from_week</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(Calendar)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)Y</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)W=1</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)wd=1</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)h=0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)m=0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)s=0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)us=0</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.Calendar.time_from_week" title="Permalink to this definition"></a></dt>
<dd><p>convert calendar iso week coordinates into time using the calendar time-zone</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Y</strong> (<em>int</em>) – ISO Year</p></li>
<li><p><strong>W</strong> (<em>int</em>) – ISO Week  [1..54], default=1</p></li>
<li><p><strong>wd</strong> (<em>int</em>) – week_day  [1..7]=[mo..su], default=1</p></li>
<li><p><strong>h</strong> (<em>int</em>) – hour   [0..23], default=0</p></li>
<li><p><strong>m</strong> (<em>int</em>) – minute [0..59], default=0</p></li>
<li><p><strong>s</strong> (<em>int</em>) – second [0..59], default=0</p></li>
<li><p><strong>us</strong> (<em>int</em>) – micro second[0..999999], default=0</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>timestamp. timestamp as in seconds utc since epoch</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time">time</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.to_string">
<span class="sig-name descname"><span class="pre">to_string</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.Calendar.to_string" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>object to_string(tuple args, dict kwds) :</dt><dd><dl class="simple">
<dt>convert time t to readable iso standard string taking</dt><dd><p>the current calendar properties, including timezone into account</p>
</dd>
<dt>Args:</dt><dd><p>utctime (time): seconds utc since epoch</p>
</dd>
<dt>Returns:</dt><dd><p>str: iso time string. iso standard formatted string,including tz info</p>
</dd>
</dl>
</dd>
<dt>to_string( (Calendar)self, (UtcPeriod)utcperiod) -&gt; str :</dt><dd><p>convert utcperiod p to readable string taking current calendar properties, including timezone into account</p>
<dl class="simple">
<dt>Args:</dt><dd><p>utcperiod (UtcPeriod): An UtcPeriod object</p>
</dd>
<dt>Returns:</dt><dd><p>str: period-string. [start..end&gt;, iso standard formatted string,including tz info</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.trim">
<span class="sig-name descname"><span class="pre">trim</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.Calendar.trim" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>object trim(tuple args, dict kwds) :</dt><dd><p>Round time t down to the nearest calendar time-unit delta_t,
taking the calendar time-zone and dst into account.</p>
<blockquote>
<div><p>t (time): timestamp utc seconds since epoch</p>
<p>delta_t (time): timestep in seconds, with semantic interpretation of Calendar.{DAY|WEEK|MONTH|YEAR}</p>
</div></blockquote>
<dl class="simple">
<dt>Returns:</dt><dd><p>time: t. new trimmed timestamp, seconds utc since epoch</p>
</dd>
<dt>Notes:</dt><dd><p>ref to related functions .add(t,delta_t,n),.diff_units(t1,t2,delta_t)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.Calendar.tz_info">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">tz_info</span></span><a class="headerlink" href="#shyft.time_series.Calendar.tz_info" title="Permalink to this definition"></a></dt>
<dd><p>The TzInfo keeping the time-zone name, utc-offset and DST rules (if any)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-utcperiod">
<h3>Class UtcPeriod<a class="headerlink" href="#class-utcperiod" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">UtcPeriod</span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod" title="Permalink to this definition"></a></dt>
<dd><p>UtcPeriod defines the open utc-time range [start..end&gt;
where end is required to be equal or greater than start</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod.contains">
<span class="sig-name descname"><span class="pre">contains</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod.contains" title="Permalink to this definition"></a></dt>
<dd><p>returns true if time t is contained in this utcperiod</p>
<dl class="simple">
<dt>contains( (UtcPeriod)self, (int)t) -&gt; bool :</dt><dd><p>returns true if time t is contained in this utcperiod</p>
</dd>
<dt>contains( (UtcPeriod)self, (UtcPeriod)p) -&gt; bool :</dt><dd><p>returns true if utcperiod p is contained in this utcperiod</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod.diff_units">
<span class="sig-name descname"><span class="pre">diff_units</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(Calendar)calendar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)delta_t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod.diff_units" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>Calculate the distance from start to end of UtcPeriod in specified units, taking dst into account if observed</dt><dd><p>The function takes calendar semantics when delta_t is calendar::DAY,WEEK,MONTH,YEAR,
and in addition also dst if observed.
e.g. the diff_units of calendar::DAY over summer-&gt;winter shift is 1,
even if the number of hours during those days are 23 and 25 summer and winter transition respectively</p>
<dl>
<dt>Args:</dt><dd><p>calendar (calendar): shyft calendar</p>
<p>delta_t (time): timestep in seconds, with semantic interpretation of DAY,WEEK,MONTH,YEAR</p>
</dd>
<dt>Returns:</dt><dd><p>int: n_units. number of units in UtcPeriod</p>
</dd>
</dl>
</dd>
<dt>diff_units( (UtcPeriod)self, (Calendar)calendar, (int)delta_t) -&gt; int :</dt><dd><p>Calculate the distance from start to end of UtcPeriod in specified units, taking dst into account if observed
The function takes calendar semantics when delta_t is calendar::DAY,WEEK,MONTH,YEAR,
and in addition also dst if observed.
e.g. the diff_units of calendar::DAY over summer-&gt;winter shift is 1,
even if the number of hours during those days are 23 and 25 summer and winter transition respectively</p>
<dl>
<dt>Args:</dt><dd><p>calendar (calendar): shyft calendar</p>
<p>delta_t (int): timestep in seconds, with semantic interpretation of DAY,WEEK,MONTH,YEAR</p>
</dd>
<dt>Returns:</dt><dd><p>int: n_units. number of units in UtcPeriod</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod.end">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">end</span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod.end" title="Permalink to this definition"></a></dt>
<dd><p>Defines the end of the period, not inclusive</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod.intersection">
<span class="sig-name descname"><span class="pre">intersection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)b</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">UtcPeriod</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod.intersection" title="Permalink to this definition"></a></dt>
<dd><p>Returns the intersection of two periods
if there is an intersection, the resulting period will be .valid() and .timespan()&gt;0
If there is no intersection, an empty not .valid() period is returned</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<a class="reference internal" href="#shyft.time_series.UtcPeriod" title="shyft.time_series.UtcPeriod"><em>UtcPeriod</em></a>) – 1st UtcPeriod argument</p></li>
<li><p><strong>b</strong> (<a class="reference internal" href="#shyft.time_series.UtcPeriod" title="shyft.time_series.UtcPeriod"><em>UtcPeriod</em></a>) – 2nd UtcPeriod argument</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>intersection. The computed intersection, or an empty not .valid() UtcPeriod</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.UtcPeriod" title="shyft.time_series.UtcPeriod">UtcPeriod</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod.overlaps">
<span class="sig-name descname"><span class="pre">overlaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)p</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod.overlaps" title="Permalink to this definition"></a></dt>
<dd><p>returns true if period p overlaps this utcperiod</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod.start">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">start</span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod.start" title="Permalink to this definition"></a></dt>
<dd><p>Defines the start of the period, inclusive</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod.timespan">
<span class="sig-name descname"><span class="pre">timespan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod.timespan" title="Permalink to this definition"></a></dt>
<dd><p>returns end-start, the timespan of the period</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod.trim">
<span class="sig-name descname"><span class="pre">trim</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(Calendar)calendar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)delta_t</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(trim_policy)trim_policy=shyft.time_series._time_series.trim_policy.TRIM_IN</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">UtcPeriod</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod.trim" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>Round UtcPeriod up or down to the nearest calendar time-unit delta_t</dt><dd><p>taking the calendar time-zone and dst into account</p>
<dl>
<dt>Args:</dt><dd><p>calendar (calendar): shyft calendar</p>
<p>delta_t (time): timestep in seconds, with semantic interpretation of Calendar.(DAY,WEEK,MONTH,YEAR)</p>
<p>trim_policy (trim_policy): TRIM_IN if rounding period inwards, else rounding outwards</p>
</dd>
<dt>Returns:</dt><dd><p>UtcPeriod: trimmed_UtcPeriod. new trimmed UtcPeriod</p>
</dd>
</dl>
</dd>
<dt>trim( (UtcPeriod)self, (Calendar)calendar, (int)delta_t [, (trim_policy)trim_policy=shyft.time_series._time_series.trim_policy.TRIM_IN]) -&gt; UtcPeriod :</dt><dd><p>Round UtcPeriod up or down to the nearest calendar time-unit delta_t
taking the calendar time-zone and dst into account</p>
<dl>
<dt>Args:</dt><dd><p>calendar (calendar): shyft calendar</p>
<p>delta_t (int): timestep in seconds, with semantic interpretation of Calendar.(DAY,WEEK,MONTH,YEAR)</p>
<p>trim_policy (trim_policy): TRIM_IN if rounding period inwards, else rounding outwards</p>
</dd>
<dt>Returns:</dt><dd><p>UtcPeriod: trimmed_UtcPeriod. new trimmed UtcPeriod</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcPeriod.valid">
<span class="sig-name descname"><span class="pre">valid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.UtcPeriod.valid" title="Permalink to this definition"></a></dt>
<dd><p>returns true if start&lt;=end otherwise false</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-utctimevector">
<h3>Class UtcTimeVector<a class="headerlink" href="#class-utctimevector" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.UtcTimeVector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">UtcTimeVector</span></span><a class="headerlink" href="#shyft.time_series.UtcTimeVector" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcTimeVector.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcTimeVector)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.UtcTimeVector.append" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcTimeVector.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcTimeVector)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.UtcTimeVector.extend" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcTimeVector.from_numpy">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(object)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#shyft.time_series.UtcTimeVector" title="shyft.time_series.UtcTimeVector"><span class="pre">UtcTimeVector</span></a></span></span><a class="headerlink" href="#shyft.time_series.UtcTimeVector.from_numpy" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcTimeVector.push_back">
<span class="sig-name descname"><span class="pre">push_back</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.UtcTimeVector.push_back" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>object push_back(tuple args, dict kwds) :</dt><dd><p>appends a utctime like value to the vector</p>
<dl class="simple">
<dt>Args:</dt><dd><p>t (utctime): an int (seconds), or utctime</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcTimeVector.to_numpy">
<span class="sig-name descname"><span class="pre">to_numpy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcTimeVector)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.UtcTimeVector.to_numpy" title="Permalink to this definition"></a></dt>
<dd><p>convert to numpy array of type np.int64, seconds since epoch</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.UtcTimeVector.to_numpy_double">
<span class="sig-name descname"><span class="pre">to_numpy_double</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(UtcTimeVector)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.UtcTimeVector.to_numpy_double" title="Permalink to this definition"></a></dt>
<dd><p>convert to numpy array of type np.float64, seconds since epoch</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="time-series">
<h2>Time series<a class="headerlink" href="#time-series" title="Permalink to this headline"></a></h2>
<p>Elements in this category are the actual time series.</p>
<div class="section" id="class-timeaxis">
<h3>Class TimeAxis<a class="headerlink" href="#class-timeaxis" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">TimeAxis</span></span><a class="headerlink" href="#shyft.time_series.TimeAxis" title="Permalink to this definition"></a></dt>
<dd><p>A time-axis is a set of ordered non-overlapping periods,
and TimeAxis provides the most generic implementation of this.
The internal representation is selected based on provided parameters
to the constructor.
The internal representation is one of TimeAxis FixedDeltaT CalendarDelataT or ByPoints.
The internal representation type and corresponding realizations are available as properties.</p>
<p class="rubric">Notes</p>
<p>The internal representation can be one of TimeAxisCalendarDeltaT,TimeAxisFixedDeltaT,TimeAxisByPoints</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.calendar_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calendar_dt</span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.calendar_dt" title="Permalink to this definition"></a></dt>
<dd><p>The calendar dt representation(if active)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.fixed_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fixed_dt</span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.fixed_dt" title="Permalink to this definition"></a></dt>
<dd><p>The fixed dt representation (if active)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.index_of">
<span class="sig-name descname"><span class="pre">index_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeAxis)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)ix_hint=18446744073709551615</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.index_of" title="Permalink to this definition"></a></dt>
<dd><blockquote>
<div><dl>
<dt>Args:</dt><dd><p>t (int): utctime in seconds 1970.01.01</p>
<p>ix_hint (int): index-hint to make search in point-time-axis faster</p>
</dd>
<dt>Returns:</dt><dd><p>int: index. the index of the time-axis period that contains t, npos if outside range</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>index_of( (TimeAxis)self, (int)t [, (int)ix_hint=18446744073709551615]) -&gt; int :</dt><dd><p>returns the index of the period that contains t</p>
<dl>
<dt>Args:</dt><dd><p>t (int): utctime in seconds 1970.01.01</p>
<p>ix_hint (int): index-hint to make search in point-time-axis faster</p>
</dd>
<dt>Returns:</dt><dd><p>int: index. the index of the time-axis period that contains t, npos if outside range</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.merge">
<span class="sig-name descname"><span class="pre">merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeAxis)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)other</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeAxis</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.merge" title="Permalink to this definition"></a></dt>
<dd><p>Returns a new time-axis that contains the union of time-points/periods of the two time-axis.
If there is a gap between, it is filled
merge with empty time-axis results into the other time-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – The other time-axis to merge with</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>merge_result. the resulting merged time-axis</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis">TimeAxis</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.open_range_index_of">
<span class="sig-name descname"><span class="pre">open_range_index_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeAxis)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)ix_hint=18446744073709551615</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.open_range_index_of" title="Permalink to this definition"></a></dt>
<dd><p>returns the index that contains t, or is before t</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>t (int): utctime in seconds 1970.01.01</p>
<p>ix_hint (int): index-hint to make search in point-time-axis faster</p>
</dd>
<dt>Returns:</dt><dd><p>int: index. the index the time-axis period that contains t, npos if before first period n-1, if t is after last period</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>open_range_index_of( (TimeAxis)self, (int)t [, (int)ix_hint=18446744073709551615]) -&gt; int :</dt><dd><p>returns the index that contains t, or is before t</p>
<dl>
<dt>Args:</dt><dd><p>t (int): utctime in seconds 1970.01.01</p>
<p>ix_hint (int): index-hint to make search in point-time-axis faster</p>
</dd>
<dt>Returns:</dt><dd><p>int: index. the index the time-axis period that contains t, npos if before first period n-1, if t is after last period</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.period">
<span class="sig-name descname"><span class="pre">period</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeAxis)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)i</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">UtcPeriod</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.period" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>i</strong> (<em>int</em>) – the i’th period, 0..n-1</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>period. the i’th period of the time-axis</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.UtcPeriod" title="shyft.time_series.UtcPeriod">UtcPeriod</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.point_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">point_dt</span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.point_dt" title="Permalink to this definition"></a></dt>
<dd><p>The point_dt representation(if active)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.size">
<span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeAxis)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.size" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ol class="loweralpha simple" start="14">
<li><p>number of periods in time-axis</p></li>
</ol>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeAxis)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)n</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeAxis</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.slice" title="Permalink to this definition"></a></dt>
<dd><p>returns slice of time-axis as a new time-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>int</em>) – first interval to include</p></li>
<li><p><strong>n</strong> (<em>int</em>) – number of intervals to include</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>time-axis. A new time-axis with the specified slice</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis">TimeAxis</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.time">
<span class="sig-name descname"><span class="pre">time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeAxis)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)i</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.time" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>i</strong> (<em>int</em>) – the i’th period, 0..n-1</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>utctime. the start(utctime) of the i’th period of the time-axis</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.time_points">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">time_points</span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.time_points" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>extract all time-points from a TimeAxis</dt><dd><p>like
[ time_axis.time(i) ].append(time_axis.total_period().end) if time_axis.size() else []</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time_axis</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>time_points</strong> – [ time_axis.time(i) ].append(time_axis.total_period().end)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array(dtype=np.int64)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.time_points_double">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">time_points_double</span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.time_points_double" title="Permalink to this definition"></a></dt>
<dd><p>extract all time-points from a TimeAxis with microseconds
like
[ time_axis.time(i) ].append(time_axis.total_period().end) if time_axis.size() else []</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time_axis</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>time_points</strong> – [ time_axis.time(i) ].append(time_axis.total_period().end)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array(dtype=np.float64)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.timeaxis_type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">timeaxis_type</span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.timeaxis_type" title="Permalink to this definition"></a></dt>
<dd><p>describes what time-axis representation type this is,e.g (fixed|calendar|point)_dt</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeAxis.total_period">
<span class="sig-name descname"><span class="pre">total_period</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeAxis)arg1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">UtcPeriod</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeAxis.total_period" title="Permalink to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>total_period. the period that covers the entire time-axis</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.UtcPeriod" title="shyft.time_series.UtcPeriod">UtcPeriod</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-timeseries">
<h3>Class TimeSeries<a class="headerlink" href="#class-timeseries" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">TimeSeries</span></span><a class="headerlink" href="#shyft.time_series.TimeSeries" title="Permalink to this definition"></a></dt>
<dd><p>A time-series providing mathematical and statistical operations and functionality.</p>
<p>A time-series can be an expression, or a concrete point time-series.
All time-series do have a time-axis, values, and a point fx policy.
The value, f(t) outside the time-axis is nan
Operations between time-series, e.g. <cite>a+b</cite>, respects the mathematical <cite>nan op something equals nan</cite></p>
<p>The time-series can provide a value for all the intervals, and the point_fx policy
defines how the values should be interpreted:</p>
<p>POINT_INSTANT_VALUE(linear):</p>
<blockquote>
<div><p>the point value is valid at the start of the period, linear between points
-or flat extended value if the next point is nan.
typical for state-variables, like water-level, temperature measured at 12:00 etc.</p>
</div></blockquote>
<p>POINT_AVERAGE_VALUE(stair-case):</p>
<blockquote>
<div><p>the point represents an average or constant value over the period
typical for model-input and results, precipitation mm/h, discharge m^3/s</p>
</div></blockquote>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft.time_series</span> <span class="kn">import</span> <span class="n">Calendar</span><span class="p">,</span><span class="n">deltahours</span><span class="p">,</span><span class="n">TimeAxis</span><span class="p">,</span><span class="n">TimeSeries</span><span class="p">,</span><span class="n">POINT_AVERAGE_VALUE</span> <span class="k">as</span> <span class="n">fx_avg</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">utc</span> <span class="o">=</span> <span class="n">Calendar</span><span class="p">()</span>  <span class="c1"># ensure easy consistent explicit handling of calendar and time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span> <span class="o">=</span> <span class="n">TimeAxis</span><span class="p">(</span><span class="n">utc</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">2016</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">deltahours</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># create a time-axis to use</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">ta</span><span class="p">)),</span> <span class="n">fx_avg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">ta</span><span class="p">)),</span> <span class="n">fx_avg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">*</span><span class="mf">3.0</span>  <span class="c1"># c is now an expression, time-axis is the overlap of a and b, lazy evaluation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c_values</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>  <span class="c1"># compute and extract the values, as numpy array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c_evaluated</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span> <span class="c1"># computes the expression, return a new concrete point-ts equal to the expression</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>TimeSeries can also be symbolic, that is, have urls, that is resolved later, serverside using the  <a class="reference internal" href="#shyft.time_series.DtsServer" title="shyft.time_series.DtsServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">DtsServer</span></code></a>
The TimeSeries functionality includes:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>construction</strong>: TimeSeries(time-axis,values,point_interpretation), TimeSeries(ts_url), TimeSeries(ts_url,ts_fragment)  <code class="xref py py-func docutils literal notranslate"><span class="pre">create_from_pattern()</span></code></p></li>
<li><p><strong>mutating points</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.set" title="shyft.time_series.TimeSeries.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.fill" title="shyft.time_series.TimeSeries.fill"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fill()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.scale_by" title="shyft.time_series.TimeSeries.scale_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">scale_by()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.merge_points" title="shyft.time_series.TimeSeries.merge_points"><code class="xref py py-meth docutils literal notranslate"><span class="pre">merge_points()</span></code></a></p></li>
<li><p><strong>combining/extending</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.extend" title="shyft.time_series.TimeSeries.extend"><code class="xref py py-meth docutils literal notranslate"><span class="pre">extend()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.use_time_axis_from" title="shyft.time_series.TimeSeries.use_time_axis_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">use_time_axis_from()</span></code></a></p></li>
<li><p><strong>resampling</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.average" title="shyft.time_series.TimeSeries.average"><code class="xref py py-meth docutils literal notranslate"><span class="pre">average()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.accumulate" title="shyft.time_series.TimeSeries.accumulate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">accumulate()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.time_shift" title="shyft.time_series.TimeSeries.time_shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">time_shift()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.use_time_axis_from" title="shyft.time_series.TimeSeries.use_time_axis_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">use_time_axis_from()</span></code></a></p></li>
<li><p><strong>f(x)</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.transform" title="shyft.time_series.TimeSeries.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transform()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.abs" title="shyft.time_series.TimeSeries.abs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">abs()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.derivative" title="shyft.time_series.TimeSeries.derivative"><code class="xref py py-meth docutils literal notranslate"><span class="pre">derivative()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.integral" title="shyft.time_series.TimeSeries.integral"><code class="xref py py-meth docutils literal notranslate"><span class="pre">integral()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.min" title="shyft.time_series.TimeSeries.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">min()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.max" title="shyft.time_series.TimeSeries.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">max()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.pow" title="shyft.time_series.TimeSeries.pow"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pow()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.log" title="shyft.time_series.TimeSeries.log"><code class="xref py py-meth docutils literal notranslate"><span class="pre">log()</span></code></a></p></li>
<li><p><strong>boolean f(x)</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.inside" title="shyft.time_series.TimeSeries.inside"><code class="xref py py-meth docutils literal notranslate"><span class="pre">inside()</span></code></a> , creates mask(1.0,0.0 series) you can use for math/filtering expressions</p></li>
<li><p><strong>statistics</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.statistics" title="shyft.time_series.TimeSeries.statistics"><code class="xref py py-meth docutils literal notranslate"><span class="pre">statistics()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.kling_gupta" title="shyft.time_series.TimeSeries.kling_gupta"><code class="xref py py-meth docutils literal notranslate"><span class="pre">kling_gupta()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.nash_sutcliffe" title="shyft.time_series.TimeSeries.nash_sutcliffe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">nash_sutcliffe()</span></code></a></p></li>
<li><p><strong>filtering</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.convolve_w" title="shyft.time_series.TimeSeries.convolve_w"><code class="xref py py-meth docutils literal notranslate"><span class="pre">convolve_w()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.krls_interpolation" title="shyft.time_series.TimeSeries.krls_interpolation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">krls_interpolation()</span></code></a></p></li>
<li><p><strong>quality and correction</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.quality_and_self_correction" title="shyft.time_series.TimeSeries.quality_and_self_correction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">quality_and_self_correction()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.quality_and_ts_correction" title="shyft.time_series.TimeSeries.quality_and_ts_correction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">quality_and_ts_correction()</span></code></a> , min-max limits, replace by surrounding points or replacement ts</p></li>
<li><p><strong>bit-encoded</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.decode" title="shyft.time_series.TimeSeries.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">decode()</span></code></a></p></li>
<li><p><strong>partitioning and percentiles</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.partition_by" title="shyft.time_series.TimeSeries.partition_by"><code class="xref py py-meth docutils literal notranslate"><span class="pre">partition_by()</span></code></a></p></li>
<li><p><strong>n-ary operations</strong>: <a class="reference internal" href="#shyft.time_series.TsVector.sum" title="shyft.time_series.TsVector.sum"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TsVector.sum()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TsVector.forecast_merge" title="shyft.time_series.TsVector.forecast_merge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TsVector.forecast_merge()</span></code></a> , operations on TsVector that results in a TimeSeries</p></li>
<li><p><strong>hydrology domain</strong>: <a class="reference internal" href="#shyft.time_series.TimeSeries.rating_curve" title="shyft.time_series.TimeSeries.rating_curve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rating_curve()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.bucket_to_hourly" title="shyft.time_series.TimeSeries.bucket_to_hourly"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bucket_to_hourly()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.ice_packing" title="shyft.time_series.TimeSeries.ice_packing"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ice_packing()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TimeSeries.ice_packing_recession" title="shyft.time_series.TimeSeries.ice_packing_recession"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ice_packing_recession()</span></code></a>  <code class="xref py py-func docutils literal notranslate"><span class="pre">shyft.time_series.create_glacier_melt_ts_m3s()</span></code></p></li>
</ul>
</div></blockquote>
<p>Other useful classes to look at: <a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeAxis</span></code></a> , <a class="reference internal" href="#shyft.time_series.Calendar" title="shyft.time_series.Calendar"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calendar</span></code></a> , <a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector"><code class="xref py py-class docutils literal notranslate"><span class="pre">TsVector</span></code></a> , <a class="reference internal" href="#shyft.time_series.point_interpretation_policy" title="shyft.time_series.point_interpretation_policy"><code class="xref py py-class docutils literal notranslate"><span class="pre">point_interpretation_policy</span></code></a></p>
<p>Please check the extensive test suite, notebooks, examples and time_series for usage.</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.abs">
<span class="sig-name descname"><span class="pre">abs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.abs" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts, abs(py::self</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ts. a new time-series expression, that will provide the abs-values of self.values</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.accumulate">
<span class="sig-name descname"><span class="pre">accumulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)ta</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.accumulate" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts where each i-th value ::
| integral f(t)*dt, from t0..ti</p>
<p>given the specified time-axis ta, and the point interpretation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ta</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – time-axis that specifies the periods where accumulated integral is applied</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new time-series expression, that will provide the accumulated values when requested</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.average">
<span class="sig-name descname"><span class="pre">average</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)ta</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.average" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts that is the true average of self
over the specified time-axis ta.
Notice that same definition as for integral applies; non-nan parts goes into the average</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ta</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – time-axis that specifies the periods where true-average is applied</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new time-series expression, that will provide the true-average when requested</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>the self point interpretation policy is used when calculating the true average</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.bind">
<span class="sig-name descname"><span class="pre">bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)bts</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.bind" title="Permalink to this definition"></a></dt>
<dd><p>given that this ts,self, is a bind-able ts (aref_ts)
and that bts is a concrete point TimeSeries, or something that can be evaluated to one,
use it as representation
for the values of this ts.
Other releated functions are find_ts_bind_info,TimeSeries(‘a-ref-string’)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bts</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – a concrete point ts, or ready-to-evaluate expression, with time-axis, values and fx_policy</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>raises runtime_error if any of preconditions is not true</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.bind_done">
<span class="sig-name descname"><span class="pre">bind_done</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.bind_done" title="Permalink to this definition"></a></dt>
<dd><p>after bind operations on unbound time-series of an expression is done, call bind_done()
to prepare the expression for use
Other releated methods are .bind(), .find_ts_bind_info() and needs_bind().</p>
<p class="rubric">Notes</p>
<p>Usually this is done automatically by the dtss framework, but if not using dtss</p>
<p>this function is needed <em>after</em> the symbolic ts’s are bound</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.bucket_to_hourly">
<span class="sig-name descname"><span class="pre">bucket_to_hourly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)start_hour_utc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)bucket_emptying_limit</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.bucket_to_hourly" title="Permalink to this definition"></a></dt>
<dd><p>Precipitation bucket measurements have a lot of tweaks that needs to be resolved,
including negative variations over the day due to faulty temperature-dependent
volume/weight sensors attached.</p>
<p>A precipitation bucket accumulates precipitation, so the readings should be strictly
increasing by time, until the bucket is emptied (full, or as part of maintenance).</p>
<p>The goal for the bucket_to_hourly algorithm is to provide <em>hourly</em> precipitation, based on some input signal
that usually is hourly(averaging is used if not hourly).</p>
<p>The main strategy is to use 24 hour differences (typically at hours in a day where the
temperature is low, like early in the morning.), to adjust the hourly volume.</p>
<p>Differences in periods of 24hour are distributed on all positive hourly evenets, the
negative derivatives are zeroed out, so that the hourly result for each 24 hour
is steady increasing, and equal to the difference of the 24hour area.</p>
<p>The derivative is then used to compute the hourly precipitation rate in mm/h</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_hour_utc</strong> (<em>int</em>) – valid range [0..24], usually set to early morning(low-stable temperature)</p></li>
<li><p><strong>bucket_emptying_limit</strong> (<em>float</em>) – a negative number, range[-oo..0&gt;, limit of when to detect an emptying of a bucket in the unit of the measurements series</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new hourly rate ts, that transforms the accumulated series, compensated for the described defects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.clone_expression">
<span class="sig-name descname"><span class="pre">clone_expression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.clone_expression" title="Permalink to this definition"></a></dt>
<dd><p>create a copy of the ts-expression, such that all directed unbound parts from
the terminal and upwards is copied.
The parts of the expression-tree that is bound, invariant, is copied by ref.</p>
<p class="rubric">Notes</p>
<p>this function is only useful in context where multiple bind/rebind while keeping the expression is needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>semantic_clone. returns a copy of the ts, such that all unbound parts are copied, all bound parts and terminals are just shallow copied(referenced)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.compress">
<span class="sig-name descname"><span class="pre">compress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)accuracy</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.compress" title="Permalink to this definition"></a></dt>
<dd><p>Compress by reducing number of points sufficient to represent the same f(t) within accuracy.
The returned ts is a new ts with break-point/variabel interval representation.
note: lazy binding expressions(server-side eval) is not yet supported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>accuracy</em>) – if v[i]-v[i+1] &lt;accuracy the v[i+1] is dropped</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>compressed_ts. a new compressed within accuracy time-series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.compress_size">
<span class="sig-name descname"><span class="pre">compress_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)accuracy</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.compress_size" title="Permalink to this definition"></a></dt>
<dd><p>Compute number of points this time-series could be reduced to if calling ts.compress(accuracy).
note: lazy binding expressions(server-side eval) is not yet supported.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>accuracy</em>) – if v[i]-v[i+1] &lt;accuracy the v[i+1] is dropped</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>compressed_size. number of distinct point needed to represent the time-series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.convolve_w">
<span class="sig-name descname"><span class="pre">convolve_w</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(DoubleVector)weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(convolve_policy)policy</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.convolve_w" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts that is the convolved ts with the given weights list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>weights</strong> (<em>DoubleVector</em>) – the weights profile, use DoubleVector.from_numpy(…) to create these. It’s the callers responsibility to ensure the sum of weights are 1.0</p></li>
<li><p><strong>policy</strong> (<a class="reference internal" href="#shyft.time_series.convolve_policy" title="shyft.time_series.convolve_policy"><em>convolve_policy</em></a>) – (USE_NEAREST|USE_ZERO|USE_NAN + BACKWARD|FORWARD|CENTER). Specifies how to handle boundary values</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new time-series that is evaluated on request to the convolution of self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.decode">
<span class="sig-name descname"><span class="pre">decode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)start_bit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)n_bits</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.decode" title="Permalink to this definition"></a></dt>
<dd><p>Create an time-series that decodes the source using provided
specification start_bit and n_bits.
This function can typically be used to decode status-signals from sensors stored as
binary encoded bits, using integer representation
The floating point format allows up to 52 bits to be precisely stored as integer
- thus there are restrictions to start_bit and n_bits accordingly.
Practical sensors quality signals have like 32 bits of status information encoded
If the value in source time-series is:</p>
<blockquote>
<div><ul class="simple">
<li><p>negative</p></li>
<li><p>nan</p></li>
<li><p>larger than 52 bits</p></li>
</ul>
</div></blockquote>
<p>Then nan is returned for those values</p>
<p>ts.decode(start_bit=1,n_bits=1) will return values [0,1,nan]
similar:
ts.decode(start_bit=1,n_bits=2) will return values [0,1,2,3,nan]
etc..</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_bit</strong> (<em>int</em>) – where in the n-bits integer the value is stored, range[0..51]</p></li>
<li><p><strong>n_bits</strong> (<em>int</em>) – how many bits are encoded, range[0..51], but start_bit +n_bits &lt; 51</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>decode_ts. Evaluated on demand decoded time-series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.derivative">
<span class="sig-name descname"><span class="pre">derivative</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(derivative_method)method=shyft.time_series._time_series.derivative_method.DEFAULT</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.derivative" title="Permalink to this definition"></a></dt>
<dd><p>Compute the derivative of the ts, according to the method specified.
For linear(POINT_INSTANT_VALUE), it is always the derivative of the straight line between points,
- using nan for the interval starting at the last point until end of time-axis.
Default for stair-case(POINT_AVERAGE_VALUE) is the average derivative over each time-step,
- using 0 as rise for the first/last half of the intervals at the boundaries.
here you can influence the method used, selecting .forward_diff, .backward_diff</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>method</strong> (<a class="reference internal" href="#shyft.time_series.derivative_method" title="shyft.time_series.derivative_method"><em>derivative_method</em></a>) – default value gives center/average derivative .(DEFAULT|FORWARD|BACKWARD|CENTER)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>derivative. The derivative ts</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.deserialize">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">deserialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(ByteVector)blob</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.deserialize" title="Permalink to this definition"></a></dt>
<dd><p>convert a blob, as returned by .serialize() into a Timeseries</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.evaluate" title="Permalink to this definition"></a></dt>
<dd><p>Forces evaluation of the expression, returns a new concrete time-series
that is detached from the expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ts. the evaluated copy of the expression that self represents</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)ts</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(extend_split_policy)split_policy=shyft.time_series._time_series.extend_split_policy.LHS_LAST</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(extend_fill_policy)fill_policy=shyft.time_series._time_series.extend_fill_policy.FILL_NAN</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(time)split_at=time(0)</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)fill_value=nan</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.extend" title="Permalink to this definition"></a></dt>
<dd><p>create a new time-series that is self extended with ts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – time-series to extend self with, only values after both the start of self, and split_at is used</p></li>
<li><p><strong>split_policy</strong> (<a class="reference internal" href="#shyft.time_series.extend_split_policy" title="shyft.time_series.extend_split_policy"><em>extend_split_policy</em></a>) – policy determining where to split between self and ts</p></li>
<li><p><strong>fill_policy</strong> (<a class="reference internal" href="#shyft.time_series.extend_fill_policy" title="shyft.time_series.extend_fill_policy"><em>extend_fill_policy</em></a>) – policy determining how to fill any gap between self and ts</p></li>
<li><p><strong>split_at</strong> (<em>utctime</em>) – time at which to split if split_policy == EPS_VALUE</p></li>
<li><p><strong>fill_value</strong> (<em>float</em>) – value to fill any gap with if fill_policy == EPF_FILL</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>extended_ts. a new time-series that is the extension of self with ts</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.fill">
<span class="sig-name descname"><span class="pre">fill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)v</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.fill" title="Permalink to this definition"></a></dt>
<dd><p>fill all values with v</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.find_ts_bind_info">
<span class="sig-name descname"><span class="pre">find_ts_bind_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsBindInfoVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.find_ts_bind_info" title="Permalink to this definition"></a></dt>
<dd><p>recursive search through the expression that this ts represents,
and return a list of TsBindInfo that can be used to
inspect and possibly ‘bind’ to ts-values.
see also related function bind()</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>bind_info. A list of BindInfo where each entry contains a symbolic-ref and a ts that needs binding</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>TsBindInfoVector</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Point</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.get" title="Permalink to this definition"></a></dt>
<dd><p>returns the point(t,v) at time t</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.get_krls_predictor">
<span class="sig-name descname"><span class="pre">get_krls_predictor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)dt</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)gamma=0.001</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)tolerance=0.01</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)size=1000000</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">KrlsRbfPredictor</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.get_krls_predictor" title="Permalink to this definition"></a></dt>
<dd><p>Get a KRLS predictor trained on this time-series.</p>
<p>If you only want a interpolation of self use krls_interpolation instead, this method
return the underlying predictor instance that can be used to generate mean-squared error
estimates, or can be further trained on more data.</p>
<p class="rubric">Notes</p>
<p>A predictor can only be generated for a bound time-series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dt</strong> (<em>float</em>) – The time-step in seconds the underlying predictor is specified for. Note that this does not put a limit on time-axes used, but for best results it should be approximatly equal to the time-step of time-axes used with the predictor. In addition it should not be to long, else you will get poor results. Try to keep the dt less than a day, 3-8 hours is usually fine.</p></li>
<li><p><strong>gamma</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – Determines the width of the radial basis functions for the KRLS algorithm. Lower values mean wider basis functions, wider basis functions means faster computation but lower accuracy. Note that the tolerance parameter also affects speed and accurcy. A large value is around <cite>1E-2</cite>, and a small value depends on the time step. By using values larger than <cite>1E-2</cite> the computation will probably take to long. Testing have reveled that <cite>1E-3</cite> works great for a time-step of 3 hours, while a gamma of <cite>1E-2</cite> takes a few minutes to compute. Use <cite>1E-4</cite> for a fast and tolerably accurate prediction. Defaults to <cite>1E-3</cite></p></li>
<li><p><strong>tolerance</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – The krls training tolerance. Lower values makes the prediction more accurate, but slower. This typically have less effect than gamma, but is usefull for tuning. Usually it should be either <cite>0.01</cite> or <cite>0.001</cite>. Defaults to <cite>0.01</cite></p></li>
<li><p><strong>size</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – The size of the “memory” of the underlying predictor. The default value is usually enough. Defaults to <cite>1000000</cite>.</p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="nn">stat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft.time_series</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">Calendar</span><span class="p">,</span> <span class="n">utctime_now</span><span class="p">,</span> <span class="n">deltahours</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">TimeAxis</span><span class="p">,</span> <span class="n">TimeSeries</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span> <span class="o">=</span> <span class="n">Calendar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span> <span class="o">=</span> <span class="n">utctime_now</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">deltahours</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">365</span><span class="o">*</span><span class="mi">24</span>  <span class="c1"># one year</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># generate random bell-shaped data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">norm</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="n">norm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">+</span> <span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># -----</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span> <span class="o">=</span> <span class="n">TimeAxis</span><span class="p">(</span><span class="n">cal</span><span class="p">,</span> <span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a predictor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pred</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">get_krls_predictor</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_mse</span> <span class="o">=</span> <span class="n">pred</span><span class="o">.</span><span class="n">predictor_mse</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>  <span class="c1"># compute mse relative to ts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">krls_ts</span> <span class="o">=</span> <span class="n">pred</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">ta</span><span class="p">)</span>  <span class="c1"># generate a prediction, this is the result from ts.krls_interpolation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">krls_mse_ts</span> <span class="o">=</span> <span class="n">pred</span><span class="o">.</span><span class="n">mse_ts</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># compute a mse time-series using 6 points around each sample</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>krls_predictor. A KRLS predictor pre-trained once on self.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.KrlsRbfPredictor" title="shyft.time_series.KrlsRbfPredictor">KrlsRbfPredictor</a></p>
</dd>
</dl>
<p>Other related methods are:
<a class="reference internal" href="#shyft.time_series.TimeSeries.krls_interpolation" title="shyft.time_series.TimeSeries.krls_interpolation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shyft.time_series.TimeSeries.krls_interpolation()</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.get_time_axis">
<span class="sig-name descname"><span class="pre">get_time_axis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeAxis</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.get_time_axis" title="Permalink to this definition"></a></dt>
<dd><p>TimeAxis: the time-axis</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.ice_packing">
<span class="sig-name descname"><span class="pre">ice_packing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(IcePackingParameters)ip_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(ice_packing_temperature_policy)ipt_policy</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.ice_packing" title="Permalink to this definition"></a></dt>
<dd><p>Create a binary time-series indicating whether ice-packing is occuring or not.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>self</cite> is interpreted and assumed to be a temperature time-series.</p>
</div>
<p>The ice packing detection is based on the mean temperature in a predetermined time
window before the time-point of interrest (see <cite>IcePackingParameters.window</cite>.
The algorithm determines there to be ice packing when the mean temperature is below
a given threshold temperature (see <cite>IcePackingParameters.threshold_temp</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip_param</strong> (<a class="reference internal" href="#shyft.time_series.IcePackingParameters" title="shyft.time_series.IcePackingParameters"><em>IcePackingParameters</em></a>) – Parameter container controlling the ice packing detection.</p></li>
<li><p><strong>ipt_policy</strong> (<a class="reference internal" href="#shyft.time_series.ice_packing_temperature_policy" title="shyft.time_series.ice_packing_temperature_policy"><em>ice_packing_temperature_policy</em></a>) – Policy flags for determining how to deal with missing temperature values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ice_packing_ts. A time-series indicating wheter ice packing occurs or not</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft.time_series</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">IcePackingParameters</span><span class="p">,</span> <span class="n">ice_packing_temperature_policy</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">TimeAxis</span><span class="p">,</span> <span class="n">TimeSeries</span><span class="p">,</span> <span class="n">point_interpretation_policy</span><span class="p">,</span> <span class="n">DoubleVector</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">utctime_now</span><span class="p">,</span> <span class="n">deltahours</span><span class="p">,</span> <span class="n">deltaminutes</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span> <span class="o">=</span> <span class="n">utctime_now</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">deltaminutes</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># generate jittery data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># - first descending from +5 to -5 then ascending back to +5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># - include a NaN hole at the bottom of the V</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_</span> <span class="o">=</span> <span class="n">n</span> <span class="k">if</span> <span class="p">(</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span> <span class="o">==</span> <span class="n">n</span> <span class="k">else</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span>  <span class="c1"># assure even</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span>
<span class="gp">... </span>    <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">n_</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">n_</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span><span class="p">))</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="n">n_</span><span class="p">)</span>  <span class="c1"># add uniform noise</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">[</span><span class="n">n_</span><span class="o">//</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span><span class="n">n_</span><span class="o">//</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">)</span>  <span class="c1"># add some missing data</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create Shyft data structures</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span> <span class="o">=</span> <span class="n">TimeAxis</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">n_</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_ts</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">DoubleVector</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
<span class="gp">... </span>                            <span class="n">point_interpretation_policy</span><span class="o">.</span><span class="n">POINT_AVERAGE_VALUE</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># do the ice packing detection</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip_param</span> <span class="o">=</span> <span class="n">IcePackingParameters</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">threshold_window</span><span class="o">=</span><span class="n">deltahours</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">threshold_temperature</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># try all the different temperature policies</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ice_packing_ts_disallow</span> <span class="o">=</span> <span class="n">temperature_ts</span><span class="o">.</span><span class="n">ice_packing</span><span class="p">(</span><span class="n">ip_param</span><span class="p">,</span> <span class="n">ice_packing_temperature_policy</span><span class="o">.</span><span class="n">DISALLOW_MISSING</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ice_packing_ts_initial</span> <span class="o">=</span> <span class="n">temperature_ts</span><span class="o">.</span><span class="n">ice_packing</span><span class="p">(</span><span class="n">ip_param</span><span class="p">,</span> <span class="n">ice_packing_temperature_policy</span><span class="o">.</span><span class="n">ALLOW_INITIAL_MISSING</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ice_packing_ts_any</span> <span class="o">=</span> <span class="n">temperature_ts</span><span class="o">.</span><span class="n">ice_packing</span><span class="p">(</span><span class="n">ip_param</span><span class="p">,</span> <span class="n">ice_packing_temperature_policy</span><span class="o">.</span><span class="n">ALLOW_ANY_MISSING</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plotting</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft.time_series</span> <span class="kn">import</span> <span class="n">time_axis_extract_time_points</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># NOTE: The offsets below are added solely to be able to distinguish between the different time-axes</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_axis_extract_time_points</span><span class="p">(</span><span class="n">ta</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">temperature_ts</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Temperature&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_axis_extract_time_points</span><span class="p">(</span><span class="n">ta</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ice_packing_ts_disallow</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Ice packing? [DISALLOW_MISSING]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_axis_extract_time_points</span><span class="p">(</span><span class="n">ta</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ice_packing_ts_initial</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Ice packing? [ALLOW_INITIAL_MISSING]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_axis_extract_time_points</span><span class="p">(</span><span class="n">ta</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ice_packing_ts_any</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span> <span class="o">-</span> <span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Ice packing? [ALLOW_ANY_MISSING]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.ice_packing_recession">
<span class="sig-name descname"><span class="pre">ice_packing_recession</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)ip_ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(IcePackingRecessionParameters)ipr_params</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.ice_packing_recession" title="Permalink to this definition"></a></dt>
<dd><p>Create a new time series where segments are replaced by recession curves.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The total period (<cite>TimeSeries.total_period</cite>) of <cite>self</cite> needs to be equal to,
or contained in the total period of <cite>ip_ts</cite>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip_ts</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – A binary time-series indicating if ice packing occurring. See <cite>TimeSeries.ice_packing</cite>.</p></li>
<li><p><strong>ip_param</strong> (<a class="reference internal" href="#shyft.time_series.IcePackingParameters" title="shyft.time_series.IcePackingParameters"><em>IcePackingParameters</em></a>) – Parameter container controlling the ice packing recession curve.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ice_packing_recession_ts. A time-series where sections in <cite>self</cite> is replaced by recession curves as indicated by <cite>ip_ts</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft.time_series</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">IcePackingParameters</span><span class="p">,</span> <span class="n">IcePackingRecessionParameters</span><span class="p">,</span> <span class="n">ice_packing_temperature_policy</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">TimeAxis</span><span class="p">,</span> <span class="n">TimeSeries</span><span class="p">,</span> <span class="n">point_interpretation_policy</span><span class="p">,</span> <span class="n">DoubleVector</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">utctime_now</span><span class="p">,</span> <span class="n">deltahours</span><span class="p">,</span> <span class="n">deltaminutes</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span> <span class="o">=</span> <span class="n">utctime_now</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">deltaminutes</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">100</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># generate jittery temperature data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># - first descending from +5 to -5 then ascending back to +5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># - include a NaN hole at the bottom of the V</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_</span> <span class="o">=</span> <span class="n">n</span> <span class="k">if</span> <span class="p">(</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span> <span class="o">==</span> <span class="n">n</span> <span class="k">else</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span>  <span class="c1"># assure even</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span>
<span class="gp">... </span>    <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="n">n_</span><span class="o">//</span><span class="mi">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">n_</span><span class="o">//</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span><span class="p">))</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="n">n_</span><span class="p">)</span>  <span class="c1"># add uniform noise</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_data</span><span class="p">[</span><span class="n">n_</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span><span class="n">n_</span> <span class="o">//</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">)</span>  <span class="c1"># add some missing data</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create Shyft data structures for temperature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span> <span class="o">=</span> <span class="n">TimeAxis</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">n_</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">temperature_ts</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">DoubleVector</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">temperature_data</span><span class="p">),</span>
<span class="gp">... </span>                            <span class="n">point_interpretation_policy</span><span class="o">.</span><span class="n">POINT_AVERAGE_VALUE</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># generate jittery waterflow data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># - an upwards curving parabola</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x0</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">total_period</span><span class="p">()</span><span class="o">.</span><span class="n">start</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span> <span class="o">=</span> <span class="n">ta</span><span class="o">.</span><span class="n">total_period</span><span class="p">()</span><span class="o">.</span><span class="n">end</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">n_</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow_data</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.0000000015</span><span class="o">*</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">n_</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create Shyft data structures for temperature</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flow_ts</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">DoubleVector</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">flow_data</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">point_interpretation_policy</span><span class="o">.</span><span class="n">POINT_AVERAGE_VALUE</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># do the ice packing detection</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ip_param</span> <span class="o">=</span> <span class="n">IcePackingParameters</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">threshold_window</span><span class="o">=</span><span class="n">deltahours</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">threshold_temperature</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># compute the detection time-series</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ice_packing_ts = temperature_ts.ice_packing(ip_param, ice_packing_temperature_policy.DISALLOW_MISSING)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ice_packing_ts = temperature_ts.ice_packing(ip_param, ice_packing_temperature_policy.ALLOW_INITIAL_MISSING)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ice_packing_ts</span> <span class="o">=</span> <span class="n">temperature_ts</span><span class="o">.</span><span class="n">ice_packing</span><span class="p">(</span><span class="n">ip_param</span><span class="p">,</span> <span class="n">ice_packing_temperature_policy</span><span class="o">.</span><span class="n">ALLOW_ANY_MISSING</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># setup for the recession curve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ipr_param</span> <span class="o">=</span> <span class="n">IcePackingRecessionParameters</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.00009</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">recession_minimum</span><span class="o">=</span><span class="mf">2.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># compute a recession curve based on the ice packing ts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ice_packing_recession_ts_initial</span> <span class="o">=</span> <span class="n">flow_ts</span><span class="o">.</span><span class="n">ice_packing_recession</span><span class="p">(</span><span class="n">ice_packing_ts</span><span class="p">,</span> <span class="n">ipr_param</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plotting</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft.time_series</span> <span class="kn">import</span> <span class="n">time_axis_extract_time_points</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_axis_extract_time_points</span><span class="p">(</span><span class="n">ta</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">temperature_ts</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Temperature&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_axis_extract_time_points</span><span class="p">(</span><span class="n">ta</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">flow_ts</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Flow&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_axis_extract_time_points</span><span class="p">(</span><span class="n">ta</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ice_packing_ts</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
<span class="gp">... </span>         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Ice packing?&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time_axis_extract_time_points</span><span class="p">(</span><span class="n">ta</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ice_packing_recession_ts_initial</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span>
<span class="gp">... </span>         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Recession curve&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.index_of">
<span class="sig-name descname"><span class="pre">index_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.index_of" title="Permalink to this definition"></a></dt>
<dd><p>return the index of the intervall that contains t, or npos if not found</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.inside">
<span class="sig-name descname"><span class="pre">inside</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)min_v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)max_v</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)nan_v=nan</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)inside_v=1.0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)outside_v=0.0</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.inside" title="Permalink to this definition"></a></dt>
<dd><p>Create an inside min-max range ts, that transforms the point-values
that falls into the half open range [min_v .. max_v &gt; to
the value of inside_v(default=1.0), or outside_v(default=0.0),
and if the value considered is nan, then that value is represented as nan_v(default=nan)
You would typically use this function to form a true/false series (inside=true, outside=false)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_v</strong> (<em>float</em>) – minimum range, values &lt;  min_v are not inside min_v==NaN means no lower limit</p></li>
<li><p><strong>max_v</strong> (<em>float</em>) – maximum range, values &gt;= max_v are not inside. max_v==NaN means no upper limit</p></li>
<li><p><strong>nan_v</strong> (<em>float</em>) – value to return if the value is nan</p></li>
<li><p><strong>inside_v</strong> (<em>float</em>) – value to return if the ts value is inside the specified range</p></li>
<li><p><strong>outside_v</strong> (<em>float</em>) – value to return if the ts value is outside the specified range</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>inside_ts. Evaluated on demand inside time-series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.integral">
<span class="sig-name descname"><span class="pre">integral</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)ta</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.integral" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts that is the true integral of self
over the specified time-axis ta.
defined as integral of the non-nan part of each time-axis interval</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ta</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – time-axis that specifies the periods where true-integral is applied</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new time-series expression, that will provide the true-integral when requested</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>the self point interpretation policy is used when calculating the true average</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.kling_gupta">
<span class="sig-name descname"><span class="pre">kling_gupta</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other_ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_a</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">s_b</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.TimeSeries.kling_gupta" title="Permalink to this definition"></a></dt>
<dd><p>computes the kling_gupta correlation using self as observation, and self.time_axis as
the comparison time-axis</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other_ts</strong> (<em>Timeseries</em>) – the predicted/calculated time-series to correlate</p></li>
<li><p><strong>s_r</strong> (<em>float</em>) – the kling gupta scale r factor(weight the correlation of goal function)</p></li>
<li><p><strong>s_a</strong> (<em>float</em>) – the kling gupta scale a factor(weight the relative average of the goal function)</p></li>
<li><p><strong>s_b</strong> (<em>float</em>) – the kling gupta scale b factor(weight the relative standard deviation of the goal function)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>KGEs</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.krls_interpolation">
<span class="sig-name descname"><span class="pre">krls_interpolation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)dt</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)gamma=0.001</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)tolerance=0.01</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)size=1000000</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.krls_interpolation" title="Permalink to this definition"></a></dt>
<dd><p>Compute a new TS that is a krls interpolation of self.</p>
<p>The KRLS algorithm is a kernel regression algorithm for aproximating data, the implementation
used here is from DLib: <a class="reference external" href="http://dlib.net/ml.html#krls">http://dlib.net/ml.html#krls</a>
The new time-series has the same time-axis as self, and the values vector contain no <cite>nan</cite> entries.</p>
<p>If you also want the mean-squared error of the interpolation use get_krls_predictor instead, and
use the predictor api to generate a interpolation and a mse time-series.
Other related functions are TimeSeries.get_krls_predictor, KrlsRbfPredictor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dt</strong> (<em>float</em>) – The time-step in seconds the underlying predictor is specified for. Note that this does not put a limit on time-axes used, but for best results it should be approximatly equal to the time-step of time-axes used with the predictor. In addition it should not be to long, else you will get poor results. Try to keep the dt less than a day, 3-8 hours is usually fine.</p></li>
<li><p><strong>gamma</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – Determines the width of the radial basis functions for the KRLS algorithm. Lower values mean wider basis functions, wider basis functions means faster computation but lower accuracy. Note that the tolerance parameter also affects speed and accurcy. A large value is around <cite>1E-2</cite>, and a small value depends on the time step. By using values larger than <cite>1E-2</cite> the computation will probably take to long. Testing have reveled that <cite>1E-3</cite> works great for a time-step of 3 hours, while a gamma of <cite>1E-2</cite> takes a few minutes to compute. Use <cite>1E-4</cite> for a fast and tolerably accurate prediction. Defaults to <cite>1E-3</cite></p></li>
<li><p><strong>tolerance</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – The krls training tolerance. Lower values makes the prediction more accurate, but slower. This typically have less effect than gamma, but is usefull for tuning. Usually it should be either <cite>0.01</cite> or <cite>0.001</cite>. Defaults to <cite>0.01</cite></p></li>
<li><p><strong>size</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – The size of the “memory” of the underlying predictor. The default value is usually enough. Defaults to <cite>1000000</cite>.</p></li>
</ul>
</dd>
</dl>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy.stats</span> <span class="k">as</span> <span class="nn">stat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft.time_series</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">Calendar</span><span class="p">,</span> <span class="n">utctime_now</span><span class="p">,</span> <span class="n">deltahours</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">TimeAxis</span><span class="p">,</span> <span class="n">TimeSeries</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span> <span class="o">=</span> <span class="n">Calendar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span> <span class="o">=</span> <span class="n">utctime_now</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">deltahours</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">365</span><span class="o">*</span><span class="mi">24</span>  <span class="c1"># one year</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># generate random bell-shaped data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">norm</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="n">norm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">+</span> <span class="n">norm</span><span class="o">.</span><span class="n">pdf</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># -----</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span> <span class="o">=</span> <span class="n">TimeAxis</span><span class="p">(</span><span class="n">cal</span><span class="p">,</span> <span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># compute the interpolation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_ipol</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">krls_interpolation</span><span class="p">(</span><span class="n">deltahours</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>krls_ts. A new time series being the KRLS interpolation of self.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.log" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts that contains log(py::self)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.max">
<span class="sig-name descname"><span class="pre">max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)number</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.max" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts that contains the max of self and number for each time-step</p>
<dl class="simple">
<dt>max( (TimeSeries)self, (TimeSeries)ts_other) -&gt; TimeSeries :</dt><dd><p>create a new ts that contains the max of self and ts_other</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.merge_points">
<span class="sig-name descname"><span class="pre">merge_points</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)ts</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.merge_points" title="Permalink to this definition"></a></dt>
<dd><p>Given that self is a concrete point-ts(not an expression), or empty ts,
this function modifies the point-set of self, with points, (time,value) from other ts
The result of the merge operation is the distinct set of time-points from self and other ts
where values from other ts overwrites values of self if they happen
to be at the same time-point</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ts</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – time-series to merge the time,value points from</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self. self modified with the merged points from other ts</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.min">
<span class="sig-name descname"><span class="pre">min</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)number</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.min" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts that contains the min of self and number for each time-step</p>
<dl class="simple">
<dt>min( (TimeSeries)self, (TimeSeries)ts_other) -&gt; TimeSeries :</dt><dd><p>create a new ts that contains the min of self and ts_other</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.min_max_check_linear_fill">
<span class="sig-name descname"><span class="pre">min_max_check_linear_fill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)v_min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)v_max</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)dt_max=time.max</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.min_max_check_linear_fill" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>Create a min-max range checked ts with fill-values if value is NaN or outside range</dt><dd><p>If the underlying time-series is point-instant, then fill-values are linear-interpolation,
otherwise, the previous value, if available is used as fill-value.
A similar function with more features is quality_and_self_correction()</p>
<dl>
<dt>Args:</dt><dd><p>v_min (float): minimum range, values &lt; v_min are considered NaN. v_min==NaN means no lower limit</p>
<p>v_max (float): maximum range, values &gt; v_max are considered NaN. v_max==NaN means no upper limit</p>
<p>dt_max (int): maximum time-range in seconds allowed for interpolating/extending values, default= max_utctime</p>
</dd>
<dt>Returns:</dt><dd><p>TimeSeries: min_max_check_linear_fill. Evaluated on demand time-series with NaN, out of range values filled in</p>
</dd>
</dl>
</dd>
<dt>min_max_check_linear_fill( (TimeSeries)self, (object)v_min, (object)v_max [, (time)dt_max=time.max]) -&gt; TimeSeries :</dt><dd><p>Create a min-max range checked ts with fill-values if value is NaN or outside range
If the underlying time-series is point-instant, then fill-values are linear-interpolation,
otherwise, the previous value, if available is used as fill-value.
Similar and more parameterized function is quality_and_self_correction()</p>
<dl>
<dt>Args:</dt><dd><p>v_min (float): minimum range, values &lt; v_min are considered NaN. v_min==NaN means no lower limit</p>
<p>v_max (float): maximum range, values &gt; v_max are considered NaN. v_max==NaN means no upper limit</p>
<p>dt_max (int): maximum time-range in seconds allowed for interpolating/extending values, default= max_utctime</p>
</dd>
<dt>Returns:</dt><dd><p>TimeSeries: min_max_check_linear_fill. Evaluated on demand time-series with NaN, out of range values filled in</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.min_max_check_ts_fill">
<span class="sig-name descname"><span class="pre">min_max_check_ts_fill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)v_min</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)v_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)dt_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)cts</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.min_max_check_ts_fill" title="Permalink to this definition"></a></dt>
<dd><p>Create a min-max range checked ts with cts-filled-in-values if value is NaN or outside range</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>v_min (float): minimum range, values &lt; v_min are considered NaN. v_min==NaN means no lower limit</p>
<p>v_max (float): maximum range, values &gt; v_max are considered NaN. v_max==NaN means no upper limit</p>
<p>dt_max (int): maximum time-range in seconds allowed for interpolating values</p>
<p>cts (TimeSeries): time-series that keeps the values to be filled in at points that are NaN or outside min-max-limits</p>
</dd>
<dt>Returns:</dt><dd><p>TimeSeries: min_max_check_ts_fill. Evaluated on demand time-series with NaN, out of range values filled in</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>min_max_check_ts_fill( (TimeSeries)self, (object)v_min, (object)v_max, (time)dt_max, (TimeSeries)cts) -&gt; TimeSeries :</dt><dd><p>Create a min-max range checked ts with cts-filled-in-values if value is NaN or outside range</p>
<dl>
<dt>Args:</dt><dd><p>v_min (float): minimum range, values &lt; v_min are considered NaN. v_min==NaN means no lower limit</p>
<p>v_max (float): maximum range, values &gt; v_max are considered NaN. v_max==NaN means no upper limit</p>
<p>dt_max (int): maximum time-range in seconds allowed for interpolating values</p>
<p>cts (TimeSeries): time-series that keeps the values to be filled in at points that are NaN or outside min-max-limits</p>
</dd>
<dt>Returns:</dt><dd><p>TimeSeries: min_max_check_ts_fill. Evaluated on demand time-series with NaN, out of range values filled in</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.nash_sutcliffe">
<span class="sig-name descname"><span class="pre">nash_sutcliffe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other_ts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shyft.time_series.TimeSeries.nash_sutcliffe" title="Permalink to this definition"></a></dt>
<dd><p>Computes the Nash-Sutcliffe model effiency coefficient (n.s)
for the two time-series over the specified time_axis
Ref:  <a class="reference external" href="http://en.wikipedia.org/wiki/Nash%E2%80%93Sutcliffe_model_efficiency_coefficient">http://en.wikipedia.org/wiki/Nash%E2%80%93Sutcliffe_model_efficiency_coefficient</a>
:param observed_ts: the observed time-series
:type observed_ts: TimeSeries
:param model_ts: the time-series that is the model simulated / calculated ts
:type model_ts: TimeSeries
:param time_axis: the time-axis that is used for the computation
:type time_axis: TimeAxis</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>float</strong></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>The n.s performance, that have a maximum at 1.0</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.needs_bind">
<span class="sig-name descname"><span class="pre">needs_bind</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.needs_bind" title="Permalink to this definition"></a></dt>
<dd><p>returns true if there are any unbound time-series in the expression
this time-series represent
These functions also supports symbolic time-series handling: .find_ts_bind_info(),bind() and bind_done()</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.partition_by">
<span class="sig-name descname"><span class="pre">partition_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(Calendar)calendar</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)partition_interval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)n_partitions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)common_t0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.partition_by" title="Permalink to this definition"></a></dt>
<dd><p>from a time-series, construct a TsVector of n time-series partitions.
The partitions are simply specified by calendar, delta_t(could be symbolic, like YEAR : MONTH:DAY) and n.
To make yearly partitions, just pass Calendar.YEAR as partition_interval.
The t - parameter set the start - time point in the source-time-series, e.g. like 1930.09.01
The common_t0 - parameter set the common start - time of the new partitions, e.g. 2017.09.01</p>
<p>The typical usage will be to use this function to partition years into a vector with
80 years, where we can do statistics, percentiles to compare and see the different effects of
yearly season variations.
Note that the function is more general, allowing any periodic partition, like daily, weekly, monthly etc.
that allows you to study any pattern or statistics that might be periodic by the partition pattern.
Other related methods are time_shift,average,TsVector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>calendar</strong> (<a class="reference internal" href="#shyft.time_series.Calendar" title="shyft.time_series.Calendar"><em>Calendar</em></a>) – The calendar to use, typically utc</p></li>
<li><p><strong>t</strong> (<em>utctime</em>) – specifies where to pick the first partition</p></li>
<li><p><strong>partition_interval</strong> (<em>utctimespan</em>) – the length of each partition, Calendar.YEAR,Calendar.DAY etc.</p></li>
<li><p><strong>n_partitions</strong> (<em>int</em>) – number of partitions</p></li>
<li><p><strong>common_t0</strong> (<em>utctime</em>) – specifies the time to correlate all the partitions</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts-partitions. with length n_partitions, each ts is time-shifted to common_t0 expressions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.point_interpretation">
<span class="sig-name descname"><span class="pre">point_interpretation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">point_interpretation_policy</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.point_interpretation" title="Permalink to this definition"></a></dt>
<dd><p>returns the point interpretation policy</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.pow">
<span class="sig-name descname"><span class="pre">pow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)number</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.pow" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts that contains pow(py::self,number)</p>
<dl class="simple">
<dt>pow( (TimeSeries)self, (TimeSeries)ts_other) -&gt; TimeSeries :</dt><dd><p>create a new ts that contains pow(py::self,ts_other)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.quality_and_self_correction">
<span class="sig-name descname"><span class="pre">quality_and_self_correction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(QacParameter)parameters</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.quality_and_self_correction" title="Permalink to this definition"></a></dt>
<dd><p>returns a new time-series that applies quality checks accoring to parameters
and fills in values according to rules specified in parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>parameter</strong> (<a class="reference internal" href="#shyft.time_series.QacParameter" title="shyft.time_series.QacParameter"><em>QacParameter</em></a>) – Parameter with rules for quality and corrections</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new time-series where the values are subject to quality and correction as specified</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.quality_and_ts_correction">
<span class="sig-name descname"><span class="pre">quality_and_ts_correction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(QacParameter)parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)cts</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.quality_and_ts_correction" title="Permalink to this definition"></a></dt>
<dd><p>returns a new time-series that applies quality checks accoring to parameters
and fills in values from the cts, according to rules specified in parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parameter</strong> (<a class="reference internal" href="#shyft.time_series.QacParameter" title="shyft.time_series.QacParameter"><em>QacParameter</em></a>) – Parameter with rules for quality and corrections</p></li>
<li><p><strong>cts</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – is used to fill in correct values, as f(t) for values that fails quality-checks</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new time-series where the values are subject to quality and correction as specified</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.rating_curve">
<span class="sig-name descname"><span class="pre">rating_curve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(RatingCurveParameters)rc_param</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.rating_curve" title="Permalink to this definition"></a></dt>
<dd><p>Create a new TimeSeries that is computed using a RatingCurveParameter instance.</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft.time_series</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">utctime_now</span><span class="p">,</span> <span class="n">deltaminutes</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">TimeAxis</span><span class="p">,</span> <span class="n">TimeSeries</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">RatingCurveFunction</span><span class="p">,</span> <span class="n">RatingCurveParameters</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># parameters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span> <span class="o">=</span> <span class="n">utctime_now</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">deltaminutes</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">48</span><span class="o">*</span><span class="mi">2</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># make rating function, each with two segments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcf_1</span> <span class="o">=</span> <span class="n">RatingCurveFunction</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcf_1</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>    <span class="c1"># add segment from level 0, computing f(h) = 2*(h - 0)**1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcf_1</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span><span class="mf">5.3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">)</span>  <span class="c1"># add segment from level 5.3, computing f(h) = 1.3*(h - 1)**1.4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcf_2</span> <span class="o">=</span> <span class="n">RatingCurveFunction</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcf_2</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>    <span class="c1"># add segment from level 0, computing f(h) = 1*(h - 1)**1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcf_2</span><span class="o">.</span><span class="n">add_segment</span><span class="p">(</span><span class="mf">8.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># add segment from level 8.0, computing f(h) = 0.5*(h - 0)**2</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># add rating curves to a parameter pack</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcp</span> <span class="o">=</span> <span class="n">RatingCurveParameters</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcp</span><span class="o">.</span><span class="n">add_curve</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">rcf_1</span><span class="p">)</span>  <span class="c1"># rcf_1 is active from t0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcp</span><span class="o">.</span><span class="n">add_curve</span><span class="p">(</span><span class="n">t0</span><span class="o">+</span><span class="n">dt</span><span class="o">*</span><span class="n">n</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span> <span class="n">rcf_2</span><span class="p">)</span>  <span class="c1"># rcf_2 takes over from t0 + dt*n/2</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># create a time-axis/-series</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span> <span class="o">=</span> <span class="n">TimeAxis</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">n</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rc_ts</span> <span class="o">=</span> <span class="n">ts</span><span class="o">.</span><span class="n">rating_curve</span><span class="p">(</span><span class="n">rcp</span><span class="p">)</span>  <span class="c1"># create a new time series computed using the rating curve functions</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rc_param</strong> (<em>RatingCurveParameter</em>) – RatingCurveParameter instance.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>rcts. A new TimeSeries computed using self and rc_param.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.repeat">
<span class="sig-name descname"><span class="pre">repeat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)repeat_time_axis</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.repeat" title="Permalink to this definition"></a></dt>
<dd><p>Repeat all time-series over the given repeat_time_axis periods</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>repeat_time_axis</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – A time-axis that have the coarse repeat interval, like YEAR or similar</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>repeated_ts. time-series where pattern of self is repeated throughout the period of repeat_time_axis</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.scale_by">
<span class="sig-name descname"><span class="pre">scale_by</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)v</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.scale_by" title="Permalink to this definition"></a></dt>
<dd><p>scale all values by the specified factor v</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.serialize">
<span class="sig-name descname"><span class="pre">serialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ByteVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.serialize" title="Permalink to this definition"></a></dt>
<dd><p>convert ts (expression) into a binary blob</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)v</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.set" title="Permalink to this definition"></a></dt>
<dd><p>set the i’th value</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.set_point_interpretation">
<span class="sig-name descname"><span class="pre">set_point_interpretation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(point_interpretation_policy)policy</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.set_point_interpretation" title="Permalink to this definition"></a></dt>
<dd><p>set new policy</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.set_ts_id">
<span class="sig-name descname"><span class="pre">set_ts_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)ts_id</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.set_ts_id" title="Permalink to this definition"></a></dt>
<dd><p>Set a new ts_id of symbolic ts, requires unbound ts.
To create symbolic time-series use TimeSeries(‘url://like/id’) or with payload: TimeSeries(‘url://like/id’,ts_with_values)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.size">
<span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.size" title="Permalink to this definition"></a></dt>
<dd><p>returns number of points</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)i0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)n</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.slice" title="Permalink to this definition"></a></dt>
<dd><p>Given that self is a concrete point-ts(not an expression), or empty ts,
return a new TimeSeries containing the n values starting from index i0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i0</strong> (<em>int</em>) – Index of first element to include in the slice</p></li>
<li><p><strong>n</strong> (<em>int</em>) – Number of elements to include in the slice</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.statistics">
<span class="sig-name descname"><span class="pre">statistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)ta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)p</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.statistics" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts that extract the specified statistics from self over the specified time-axis ‘ta’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ta</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – time-axis that specifies the periods where true-average is applied</p></li>
<li><p><strong>p</strong> (<em>int</em>) – percentile range [0..100], or statistical_property.AVERAGE|MIN_EXTREME|MAX_EXTREME</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new time-series expression, will provide the statistics when requested</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.stringify">
<span class="sig-name descname"><span class="pre">stringify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.stringify" title="Permalink to this definition"></a></dt>
<dd><p>return human-readable string of ts or expression</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.time">
<span class="sig-name descname"><span class="pre">time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)i</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">time</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.time" title="Permalink to this definition"></a></dt>
<dd><p>returns the time at the i’th point</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.time_axis">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">time_axis</span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.time_axis" title="Permalink to this definition"></a></dt>
<dd><p>returns the time_axis of the timeseries</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.time_shift">
<span class="sig-name descname"><span class="pre">time_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)delta_t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.time_shift" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts that is a the time-shift’ed  version of self</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>delta_t</strong> (<em>int</em>) – number of seconds to time-shift, positive values moves forward</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new time-series, that appears as time-shifted version of self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.total_period">
<span class="sig-name descname"><span class="pre">total_period</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">UtcPeriod</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.total_period" title="Permalink to this definition"></a></dt>
<dd><p>returns the total period covered by the time-axis of this time-series</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(interpolation_scheme)method</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.transform" title="Permalink to this definition"></a></dt>
<dd><p>Create a transformed time-series, having values taken from pointwise function evaluation.
Function values are determined by interpolating the given points, using the specified method.
Valid method arguments are ‘polynomial’, ‘linear’ and ‘catmull-rom’.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>transform_ts. New TimeSeries where each element is an evaluated-on-demand transformed time-series.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.ts_id">
<span class="sig-name descname"><span class="pre">ts_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.ts_id" title="Permalink to this definition"></a></dt>
<dd><p>returns ts_id of symbolic ts, or empty string if not symbolic ts
To create symbolic time-series use TimeSeries(‘url://like/id’) or with payload: TimeSeries(‘url://like/id’,ts_with_values)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>ts_id. url-like ts_id as passed to constructor or empty if the ts is not a ts with ts_id</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.use_time_axis_from">
<span class="sig-name descname"><span class="pre">use_time_axis_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)other</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.use_time_axis_from" title="Permalink to this definition"></a></dt>
<dd><p>Create a new ts that have the same values as self, but filtered to the time-axis points from
from the other supplied time-series.
This function migth be useful for making new time-series, that exactly matches
the time-axis of another series.
Values of the resulting time-series is like like:
[self(t) for t in other.time_axis.time_points[:-1]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – time-series that provides the wanted time-axis</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. a new time-series, that appears as time-shifted version of self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.v">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">v</span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.v" title="Permalink to this definition"></a></dt>
<dd><p>returns the point-values of timeseries, alias for .values</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.value">
<span class="sig-name descname"><span class="pre">value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TimeSeries)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)i</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.value" title="Permalink to this definition"></a></dt>
<dd><p>returns the value at the i’th time point</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TimeSeries.values">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">values</span></span><a class="headerlink" href="#shyft.time_series.TimeSeries.values" title="Permalink to this definition"></a></dt>
<dd><p>the values values (possibly calculated on the fly)</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>DoubleVector</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-tsvector">
<h3>Class TsVector<a class="headerlink" href="#class-tsvector" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.TsVector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">TsVector</span></span><a class="headerlink" href="#shyft.time_series.TsVector" title="Permalink to this definition"></a></dt>
<dd><p>A vector, as in strongly typed list, array,  of time-series that supports ts-math operations.
You can create a TsVector from a list, or list generator of type TimeSeries.
TsVector is to TimeSeries that a numpy array is to numbers, see also <a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeSeries</span></code></a>
Math operations and their types transformations:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>number bin_op ts_vector -&gt; ts_vector</cite></p></li>
<li><p><cite>ts_vector bin_op ts_vector -&gt; ts_vector</cite></p></li>
<li><p><cite>ts bin_op ts_vector -&gt; ts_vector</cite></p></li>
</ul>
</div></blockquote>
<p>where bin_op is any of <cite>(*,/,+,-)</cite> and explicit forms of  binary functions like pow,log,min,max.</p>
<p>In addition these are also available: <a class="reference internal" href="#shyft.time_series.TsVector.average" title="shyft.time_series.TsVector.average"><code class="xref py py-meth docutils literal notranslate"><span class="pre">average()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TsVector.integral" title="shyft.time_series.TsVector.integral"><code class="xref py py-meth docutils literal notranslate"><span class="pre">integral()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TsVector.accumulate" title="shyft.time_series.TsVector.accumulate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">accumulate()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TsVector.time_shift" title="shyft.time_series.TsVector.time_shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">time_shift()</span></code></a>  <a class="reference internal" href="#shyft.time_series.TsVector.percentiles" title="shyft.time_series.TsVector.percentiles"><code class="xref py py-meth docutils literal notranslate"><span class="pre">percentiles()</span></code></a></p>
<p>All operation returns a <strong>new</strong> object, usually a ts-vector, containing the resulting expressions</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.abs">
<span class="sig-name descname"><span class="pre">abs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.abs" title="Permalink to this definition"></a></dt>
<dd><p>create a new ts-vector, with all members equal to abs(py::self</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>tsv. a new TsVector expression, that will provide the abs-values of self.values</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.accumulate">
<span class="sig-name descname"><span class="pre">accumulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)ta</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.accumulate" title="Permalink to this definition"></a></dt>
<dd><p>create a new  vector of time-series where the vaue of each i-th element is computed as:
<cite>integral f(t) *dt, from t0..ti</cite>
given the specified time-axis ta and point interpretation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ta</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – time-axis that specifies the periods where accumulated integral is applied</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsv. a new time-series expression, that will provide the accumulated values when requested</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.append" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.average">
<span class="sig-name descname"><span class="pre">average</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)ta</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.average" title="Permalink to this definition"></a></dt>
<dd><p>create a new vector of ts that is the true average of self
over the specified time-axis ta.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ta</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – time-axis that specifies the periods where true-average is applied</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsv. a new time-series expression, that will provide the true-average when requested</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>the self point interpretation policy is used when calculating the true average</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.average_slice">
<span class="sig-name descname"><span class="pre">average_slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)lead_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)delta_t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)n</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.average_slice" title="Permalink to this definition"></a></dt>
<dd><p>Returns a ts-vector with the average time-series of the specified slice
The slice for each ts is specified by the lead_time, delta_t and n
parameters.
See also nash_sutcliffe,forecast_merge</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lead_time</strong> (<em>int</em>) – number of seconds lead-time offset from each ts .time(0)</p></li>
<li><p><strong>delta_t</strong> (<em>int</em>) – delta-time seconds to average as basis for n.s. simulation and observation values</p></li>
<li><p><strong>n</strong> (<em>int</em>) – number of time-steps of length delta_t to slice out of each forecast/simulation ts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts_vector_sliced. a ts-vector with average ts of each slice specified.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.clone_expression">
<span class="sig-name descname"><span class="pre">clone_expression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.clone_expression" title="Permalink to this definition"></a></dt>
<dd><p>create a copy of the ts-expressions, such that all directed unbound parts from
the terminal and upwards is copied.
The parts of the expression-tree that is bound, invariant, is copied by ref.</p>
<p class="rubric">Notes</p>
<p>this function is only useful in context where multiple bind/rebind while keeping the expression is needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>semantic_clone. returns a copy of the ts, such that all unbound parts are copied, all bound parts and terminals are just shallow copied(referenced)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.derivative">
<span class="sig-name descname"><span class="pre">derivative</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(derivative_method)method=shyft.time_series._time_series.derivative_method.DEFAULT</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.derivative" title="Permalink to this definition"></a></dt>
<dd><p>create a new  vector of ts where each i’th element is the
<cite>derivative of f(t)</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>method</strong> (<a class="reference internal" href="#shyft.time_series.derivative_method" title="shyft.time_series.derivative_method"><em>derivative_method</em></a>) – what derivative_method variant to use</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsv. where each member is the derivative of the source</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.evaluate" title="Permalink to this definition"></a></dt>
<dd><p>Evaluates the expressions in TsVector multithreaded,
and returns the resulting TsVector, where all items now
are  concrete terminals, that is, not expressions anymore.
Useful client-side if you have complex large expressions where
all time-series are bound (not symbols)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>evaluated_clone. returns the computed result as a new ts-vector</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.extend" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.extend_ts">
<span class="sig-name descname"><span class="pre">extend_ts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)ts</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(extend_split_policy)split_policy=shyft.time_series._time_series.extend_split_policy.LHS_LAST</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(extend_fill_policy)fill_policy=shyft.time_series._time_series.extend_fill_policy.FILL_NAN</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(time)split_at=time(0)</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)fill_value=nan</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.extend_ts" title="Permalink to this definition"></a></dt>
<dd><p>create a new ats_vector where all time-series are extended by ts</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>ts (TimeSeries): time-series to extend each time-series in self with</p>
<p>split_policy (extend_ts_split_policy): policy determining where to split between self and ts</p>
<p>fill_policy (extend_ts_fill_policy): policy determining how to fill any gap between self and ts</p>
<p>split_at (utctime): time at which to split if split_policy == EPS_VALUE</p>
<p>fill_value (float): value to fill any gap with if fill_policy == EPF_FILL</p>
</dd>
<dt>Returns:</dt><dd><p>TsVector: new_ts_vec. a new time-series vector where all time-series in self have been extended by ts</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>extend_ts( (TsVector)arg1, (TsVector)ts [, (extend_split_policy)split_policy=shyft.time_series._time_series.extend_split_policy.LHS_LAST [, (extend_fill_policy)fill_policy=shyft.time_series._time_series.extend_fill_policy.FILL_NAN [, (time)split_at=time(0) [, (object)fill_value=nan]]]]) -&gt; TsVector :</dt><dd><p>create a new ats_vector where all ts’ are extended by the matching ts from ts_vec</p>
<dl>
<dt>Args:</dt><dd><p>ts_vec (TsVector): time-series vector to extend time-series in self with</p>
<p>split_policy (extend_ts_split_policy): policy determining where to split between self and ts</p>
<p>fill_policy (extend_ts_fill_policy): policy determining how to fill any gap between self and ts</p>
<p>split_at (utctime): time at which to split if split_policy == EPS_VALUE</p>
<p>fill_value (float): value to fill any gap with if fill_policy == EPF_FILL</p>
</dd>
<dt>Returns:</dt><dd><p>TsVector: new_ts_vec. a new time-series vector where all time-series in self have been extended by the corresponding time-series in ts_vec</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.extract_as_table">
<span class="sig-name descname"><span class="pre">extract_as_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(Calendar)cal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)time_scale</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DoubleVectorVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.extract_as_table" title="Permalink to this definition"></a></dt>
<dd><p>Extract values in the ts-vector as a table, where columns:
| [0]    is the distinct union of all time_scale*(time-points i, + cal.tz_offset(i))
| [1..n] is the value contribution of the i’th ts, nan if no contribution at that time-point
This function primary usage is within visual-layer of the shyft.dashboard package to speed up processing.
The semantics and parameters reflects this.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cal</strong> (<a class="reference internal" href="#shyft.time_series.Calendar" title="shyft.time_series.Calendar"><em>Calendar</em></a>) – Calendar to use for tz-offset of each time-point (to resolve bokeh lack of tz-handling)</p></li>
<li><p><strong>time_scale</strong> (<em>float</em>) – time-scale to multiply the time from si-unit [s] to any scaled unit, typically ms</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>table. A 2d vector where [0] contains time, [1..n] the values</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DoubleVectorVector</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.forecast_merge">
<span class="sig-name descname"><span class="pre">forecast_merge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)lead_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)fc_interval</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.forecast_merge" title="Permalink to this definition"></a></dt>
<dd><p>merge the forecasts in this vector into a time-series that is constructed
taking a slice of length fc_interval starting lead_time into each of the forecasts
of this time-series vector.
The content of the vector should be ordered in forecast-time, each entry at least
fc_interval separated from the previous.
If there is missing forecasts (larger than fc_interval between two forecasts) this is
automagically repaired using extended slices from the existing forecasts</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lead_time</strong> (<em>int</em>) – start slice number of seconds from t0 of each forecast</p></li>
<li><p><strong>fc_interval</strong> (<em>int</em>) – length of each slice in seconds, and thus also gives the forecast-interval separation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>merged time-series. A merged forecast time-series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.inside">
<span class="sig-name descname"><span class="pre">inside</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)min_v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)max_v</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)nan_v=nan</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)inside_v=1.0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)outside_v=0.0</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.inside" title="Permalink to this definition"></a></dt>
<dd><p>Create an inside min-max range ts-vector, that transforms the point-values
that falls into the half open range [min_v .. max_v &gt; to
the value of inside_v(default=1.0), or outside_v(default=0.0),
and if the value considered is nan, then that value is represented as nan_v(default=nan)
You would typically use this function to form a true/false series (inside=true, outside=false)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>min_v</strong> (<em>float</em>) – minimum range, values &lt;  min_v are not inside min_v==NaN means no lower limit</p></li>
<li><p><strong>max_v</strong> (<em>float</em>) – maximum range, values &gt;= max_v are not inside. max_v==NaN means no upper limit</p></li>
<li><p><strong>nan_v</strong> (<em>float</em>) – value to return if the value is nan</p></li>
<li><p><strong>inside_v</strong> (<em>float</em>) – value to return if the ts value is inside the specified range</p></li>
<li><p><strong>outside_v</strong> (<em>float</em>) – value to return if the ts value is outside the specified range</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>inside_tsv. New TsVector where each element is an evaluated-on-demand inside time-series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.integral">
<span class="sig-name descname"><span class="pre">integral</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)ta</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.integral" title="Permalink to this definition"></a></dt>
<dd><p>create a new vector of ts that is the true integral of self
over the specified time-axis ta.
defined as integral of the non-nan part of each time-axis interval</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ta</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – time-axis that specifies the periods where true-integral is applied</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsv. a new time-series expression, that will provide the true-integral when requested</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>the self point interpretation policy is used when calculating the true average</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.log">
<span class="sig-name descname"><span class="pre">log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.log" title="Permalink to this definition"></a></dt>
<dd><p>returns TsVector log(py::self)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.max">
<span class="sig-name descname"><span class="pre">max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)number</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.max" title="Permalink to this definition"></a></dt>
<dd><p>returns max of vector and a number</p>
<dl class="simple">
<dt>max( (TsVector)self, (TimeSeries)ts) -&gt; TsVector :</dt><dd><p>returns max of ts-vector and a ts</p>
</dd>
<dt>max( (TsVector)self, (TsVector)tsv) -&gt; TsVector :</dt><dd><p>returns max of ts-vector and another ts-vector</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.min">
<span class="sig-name descname"><span class="pre">min</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)number</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.min" title="Permalink to this definition"></a></dt>
<dd><p>returns min of vector and a number</p>
<dl class="simple">
<dt>min( (TsVector)self, (TimeSeries)ts) -&gt; TsVector :</dt><dd><p>returns min of ts-vector and a ts</p>
</dd>
<dt>min( (TsVector)arg1, (TsVector)tsv) -&gt; TsVector :</dt><dd><p>returns min of ts-vector and another ts-vector</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.nash_sutcliffe">
<span class="sig-name descname"><span class="pre">nash_sutcliffe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)observation_ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)lead_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)delta_t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)n</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.nash_sutcliffe" title="Permalink to this definition"></a></dt>
<dd><p>Computes the nash-sutcliffe (wiki nash-sutcliffe) criteria between the
observation_ts over the slice of each time-series in the vector.
The slice for each ts is specified by the lead_time, delta_t and n
parameters. The function is provided to ease evaluation of forecast performance
for different lead-time periods into each forecast.
The returned value range is 1.0 for perfect match -oo for no match, or nan if observations is constant or data missing.
See also nash_sutcliffe_goal_function</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>observation_ts</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – the observation time-series</p></li>
<li><p><strong>lead_time</strong> (<em>int</em>) – number of seconds lead-time offset from each ts .time(0)</p></li>
<li><p><strong>delta_t</strong> (<em>int</em>) – delta-time seconds to average as basis for n.s. simulation and observation values</p></li>
<li><p><strong>n</strong> (<em>int</em>) – number of time-steps of length delta_t to slice out of each forecast/simulation ts</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nash-sutcliffe value. the nash-sutcliffe criteria evaluated over all time-series in the TsVector for the specified lead-time, delta_t and number of elements</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>double</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.percentiles">
<span class="sig-name descname"><span class="pre">percentiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)time_axis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(IntVector)percentiles</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.percentiles" title="Permalink to this definition"></a></dt>
<dd><dl>
<dt>Calculate the percentiles, NIST R7, excel,R definition, of the timeseries</dt><dd><p>over the specified time-axis.
The time-series point_fx interpretation is used when performing
the true-average over the time_axis periods.</p>
<dl>
<dt>Args:</dt><dd><p>percentiles (IntVector): A list of numbers,like <cite>[ 0, 25,50,-1,75,100]</cite> will return 6 time-series. Number with special sematics are: <cite>-1 -&gt; arithmetic average</cite>, <cite>-1000 -&gt; min extreme value</cite> <cite>+1000 -&gt; max extreme value</cite></p>
<p>time_axis (TimeAxis): The time-axis used when applying true-average to the time-series</p>
</dd>
<dt>Returns:</dt><dd><p>TsVector: calculated_percentiles. Time-series list with evaluated percentile results, same length as input</p>
</dd>
</dl>
</dd>
<dt>percentiles( (TsVector)self, (TimeAxisFixedDeltaT)time_axis, (IntVector)percentiles) -&gt; TsVector :</dt><dd><p>Calculate the percentiles, NIST R7, excel,R definition, of the timeseries
over the specified time-axis.
The time-series point_fx interpretation is used when performing
the true-average over the time_axis periods.</p>
<dl>
<dt>Args:</dt><dd><p>percentiles (IntVector): A list of numbers,[ 0, 25,50,-1,75,100] will return 6 time-series,`-1 -&gt; arithmetic average`, <cite>-1000 -&gt; min extreme value</cite>, ` +1000 max extreme value`</p>
<p>time_axis (TimeAxisFixedDeltaT): The time-axis used when applying true-average to the time-series</p>
</dd>
<dt>Returns:</dt><dd><p>TsVector: calculated_percentiles. Time-series list with evaluated percentile results, same length as input</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.pow">
<span class="sig-name descname"><span class="pre">pow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)number</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.pow" title="Permalink to this definition"></a></dt>
<dd><p>returns TsVector pow(py::self,number)</p>
<dl class="simple">
<dt>pow( (TsVector)self, (TimeSeries)ts) -&gt; TsVector :</dt><dd><p>returns TsVector pow(py::self,ts)</p>
</dd>
<dt>pow( (TsVector)self, (TsVector)tsv) -&gt; TsVector :</dt><dd><p>returns TsVector pow(py::self,tsv)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.repeat">
<span class="sig-name descname"><span class="pre">repeat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)repeat_time_axis</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.repeat" title="Permalink to this definition"></a></dt>
<dd><p>Repeat all time-series over the given repeat_time_axis periods</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>repeat_time_axis</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – A time-axis that have the coarse repeat interval, like YEAR or similar</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsv. time-series vector, where each element is repeated according to parameter</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.slice">
<span class="sig-name descname"><span class="pre">slice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(IntVector)indexes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.slice" title="Permalink to this definition"></a></dt>
<dd><p>returns a slice of self, specified by indexes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>indexes</strong> (<em>IntVector</em>) – the indicies to pick out from self, if indexes is empty, then all is returned</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>slice. a new TsVector, with content according to indexes specified</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.statistics">
<span class="sig-name descname"><span class="pre">statistics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)ta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)p</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.statistics" title="Permalink to this definition"></a></dt>
<dd><p>create a new vector of ts where each element is ts.statistics(ta,p)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ta</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – time-axis that specifies the periods where true-average is applied</p></li>
<li><p><strong>p</strong> (<em>int</em>) – percentile range [0..100], or statistical_property.AVERAGE|MIN_EXTREME|MAX_EXTREME</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsv. a new time-series expression, will provide the statistics when requested</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.sum">
<span class="sig-name descname"><span class="pre">sum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.sum" title="Permalink to this definition"></a></dt>
<dd><p>returns sum of all ts in TsVector as ts as in reduce(add,..))</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.time_shift">
<span class="sig-name descname"><span class="pre">time_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)delta_t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.time_shift" title="Permalink to this definition"></a></dt>
<dd><p>create a new vector of ts that is a the time-shifted  version of self</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>delta_t</strong> (<a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time"><em>time</em></a>) – number of seconds to time-shift, positive values moves forward</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsv. a new time-series, that appears as time-shifted version of self</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.transform">
<span class="sig-name descname"><span class="pre">transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(interpolation_scheme)method</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.transform" title="Permalink to this definition"></a></dt>
<dd><p>Create a transformed ts-vector, having values taken from pointwise function evaluation.
Function values are determined by interpolating the given points, using the specified method.
Valid method arguments are ‘polynomial’, ‘linear’ and ‘catmull-rom’.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>transform_tsv. New TsVector where each element is an evaluated-on-demand transformed time-series.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.use_time_axis_from">
<span class="sig-name descname"><span class="pre">use_time_axis_from</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)other</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.use_time_axis_from" title="Permalink to this definition"></a></dt>
<dd><p>Create a new ts-vector applying <a class="reference internal" href="#shyft.time_series.TimeSeries.use_time_axis_from" title="shyft.time_series.TimeSeries.use_time_axis_from"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TimeSeries.use_time_axis_from()</span></code></a>  on each member</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – time-series that provides the wanted time-axis</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsv. time-series vector, where each element have time-axis from other</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.TsVector.values_at">
<span class="sig-name descname"><span class="pre">values_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(TsVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DoubleVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.TsVector.values_at" title="Permalink to this definition"></a></dt>
<dd><p>Computes the value at specified time t for all time-series</p>
<blockquote>
<div><dl class="simple">
<dt>Args:</dt><dd><p>t (utctime): seconds since epoch 1970 UTC</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>values_at( (TsVector)self, (int)t) -&gt; DoubleVector :</dt><dd><p>Computes the value at specified time t for all time-series</p>
<dl class="simple">
<dt>Args:</dt><dd><p>t (int): seconds since epoch 1970 UTC</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="time-series-expressions">
<h2>Time series expressions<a class="headerlink" href="#time-series-expressions" title="Permalink to this headline"></a></h2>
<p>The elements in this category implement the time series expressions solution.</p>
<div class="section" id="class-tsbindinfo">
<h3>Class TsBindInfo<a class="headerlink" href="#class-tsbindinfo" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.TsBindInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">TsBindInfo</span></span><a class="headerlink" href="#shyft.time_series.TsBindInfo" title="Permalink to this definition"></a></dt>
<dd><p>TsBindInfo gives information about the time-series and it’s binding
represented by encoded string reference
Given that you have a concrete ts,
you can bind that the bind_info.ts
using bind_info.ts.bind()
see also Timeseries.find_ts_bind_info() and Timeseries.bind()</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TsBindInfo.id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#shyft.time_series.TsBindInfo.id" title="Permalink to this definition"></a></dt>
<dd><p>a unique id/url that identifies a time-series in a ts-database/file-store/service</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TsBindInfo.ts">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ts</span></span><a class="headerlink" href="#shyft.time_series.TsBindInfo.ts" title="Permalink to this definition"></a></dt>
<dd><p>the ts, provides .bind(another_ts) to set the concrete values</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="dtss-the-distributed-time-series-system">
<h2>DTSS - The Distributed Time series System<a class="headerlink" href="#dtss-the-distributed-time-series-system" title="Permalink to this headline"></a></h2>
<p>The elements in this category implements the the DTSS.
The DTSS provides ready to use services and components,
which is useful in itself.</p>
<p>In addition, the services are extensible by python hooks,
callbacks, that allow the user to extend/adapt the functionality
to cover other time-series data base backends and services.</p>
<p>Note that DTSS is not a data-base as such, but do have a built in high performance time-series db.
The DTSS is better viewed as <strong>computing component/service</strong>,
that are capable of evaluating time-series expressions, extracting the wanted information,
and sending it back to the clients.
One of the important properties of the DTSS is that we can bring the heavy computations to where
the data is located. In addition it as a specialized advanced caching system that allows evaluations
to run on memory(utilizing multi-core evaluations).</p>
<p>The open design allows it to utilize any existing legacy ts-databases/services through customization points.</p>
<div class="section" id="class-dtsserver">
<h3>Class DtsServer<a class="headerlink" href="#class-dtsserver" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">DtsServer</span></span><a class="headerlink" href="#shyft.time_series.DtsServer" title="Permalink to this definition"></a></dt>
<dd><p>A distributed time-series server.</p>
<p>The server part of the Shyft Distributed TimeSeries System(DTSS).
Capable of processing time-series messages and responding accordingly.</p>
<p>It has dual service interfaces:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>raw-socket boost serialized binary, use  <a class="reference internal" href="#shyft.time_series.DtsClient" title="shyft.time_series.DtsClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">DtsClient</span></code></a></p></li>
<li><p>web-api, web-socket(https/wss w. auth supported) using boost.beast, boost.spirit to process/emit messages. This also supports ts-change subscriptions.</p></li>
</ol>
</div></blockquote>
<p><strong>python customization and extension capability</strong></p>
<p>The user can setup callback to python to handle unbound symbolic time-series references, <cite>ts-urls</cite>.
This means that you can use your own ts database backend if you have one that can beat the shyft-internal ts-db.</p>
<p>The DtsServer then resolves symbolic references reading time-series from a service or storage for the specified period.
The server object will then compute the resulting time-series vector,
and respond back to clients with the results
multi-node considerations:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>firewall/routing: ensure that the port you are using are open for ip-traffic(use ssh-tunnel if you need ssl/tls)</p></li>
<li><p>we strongly recommend using linux for performance and longterm stability</p></li>
</ol>
</div></blockquote>
<p>The Dts also support master-slave mode, that allows scaling out computations to several Dtss instances, see set_master_slave_mode</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>DtsClient</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.add_auth_tokens">
<span class="sig-name descname"><span class="pre">add_auth_tokens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(StringVector)tokens</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.add_auth_tokens" title="Permalink to this definition"></a></dt>
<dd><p>Adds auth tokens, and activate authentication.
The tokens is compared exactly to the autorization token passed in the request.
Authorization should onlye be used for the https/wss, unless other measures(vpn/ssh tunnels etc.) are used to protect auth tokens on the wire</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>tokens</em>) – list of tokens, where each token is like <cite>Basic dXNlcjpwd2Q=</cite>, e.g: base64 user:pwd</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.alive_connections">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">alive_connections</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.alive_connections" title="Permalink to this definition"></a></dt>
<dd><p>returns currently alive connections to the server</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.auth_needed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">auth_needed</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.auth_needed" title="Permalink to this definition"></a></dt>
<dd><p>returns true if the server is setup with auth-tokens, requires web-api clients to pass a valid token</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.auth_tokens">
<span class="sig-name descname"><span class="pre">auth_tokens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">StringVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.auth_tokens" title="Permalink to this definition"></a></dt>
<dd><p>returns the registered authentication tokens.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.cache">
<span class="sig-name descname"><span class="pre">cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(StringVector)ts_ids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TsVector)ts_vector</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.cache" title="Permalink to this definition"></a></dt>
<dd><p>add/update specified ts_ids with corresponding ts to cache
please notice that there is no validation of the tds_ids, they
are threated identifiers,not verified against any existing containers etc.
Requests that follows, will use the cached item as long as it satisfies
the identifier and the coverage period requested</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts_ids</strong> (<em>StringVector</em>) – a list of time-series ids</p></li>
<li><p><strong>ts_vector</strong> (<a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector"><em>TsVector</em></a>) – a list of corresponding time-series</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.cache_max_items">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cache_max_items</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.cache_max_items" title="Permalink to this definition"></a></dt>
<dd><p>cache_max_items is the maximum number of time-series identities that are
kept in memory. Elements exceeding this capacity is elided using the least-recently-used
algorithm. Notice that assigning a lower value than the existing value will also flush out
time-series from cache in the least recently used order.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.cache_memory_target">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cache_memory_target</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.cache_memory_target" title="Permalink to this definition"></a></dt>
<dd><p>The memory max target in number of bytes.
If not set directly the following equation is  use:
cache_memory_target = cache_ts_initial_size_estimate * cache_max_items
When setting the target directly, number of items in the chache is
set so that real memory usage is less than the specified target.
The setter could cause elements to be flushed out of cache.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.cache_stats">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cache_stats</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.cache_stats" title="Permalink to this definition"></a></dt>
<dd><p>return the current cache statistics</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.cache_ts_initial_size_estimate">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cache_ts_initial_size_estimate</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.cache_ts_initial_size_estimate" title="Permalink to this definition"></a></dt>
<dd><p>The initial time-series size estimate in bytes for the cache mechanism.
memory-target = cache_ts_initial_size_estimate * cache_max_items
algorithm. Notice that assigning a lower value than the existing value will also flush out
time-series from cache in the least recently used order.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.cb">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cb</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.cb" title="Permalink to this definition"></a></dt>
<dd><p>callback for binding unresolved time-series references to concrete time-series.
Called <em>if</em> the incoming messages contains unbound time-series.
The signature of the callback function should be TsVector cb(StringVector,utcperiod)</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft</span> <span class="kn">import</span> <span class="n">time_series</span> <span class="k">as</span> <span class="n">sa</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">resolve_and_read_ts</span><span class="p">(</span><span class="n">ts_ids</span><span class="p">,</span><span class="n">read_period</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ts_ids:&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ts_ids</span><span class="p">),</span> <span class="s1">&#39;, read period=&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">read_period</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">ta</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">TimeAxis</span><span class="p">(</span><span class="n">read_period</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">sa</span><span class="o">.</span><span class="n">deltahours</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">read_period</span><span class="o">.</span><span class="n">timespan</span><span class="p">()</span><span class="o">//</span><span class="n">sa</span><span class="o">.</span><span class="n">deltahours</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">x_value</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">r</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">TsVector</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">for</span> <span class="n">ts_id</span> <span class="ow">in</span> <span class="n">ts_ids</span> <span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">fill_value</span> <span class="o">=</span> <span class="n">x_value</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">x_value</span> <span class="o">=</span> <span class="n">x_value</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and then bind the function to the callback</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">=</span><span class="n">sa</span><span class="o">.</span><span class="n">DtsServer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">.</span><span class="n">cb</span><span class="o">=</span><span class="n">resolve_and_read_ts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">.</span><span class="n">set_listening_port</span><span class="p">(</span><span class="mi">20000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">.</span><span class="n">process_messages</span><span class="p">(</span><span class="mi">60000</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.clear" title="Permalink to this definition"></a></dt>
<dd><p>stop serving connections, gracefully.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>cb, process_messages(msec),start_async()</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.clear_cache_stats">
<span class="sig-name descname"><span class="pre">clear_cache_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.clear_cache_stats" title="Permalink to this definition"></a></dt>
<dd><p>clear accumulated cache_stats</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.find_cb">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find_cb</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.find_cb" title="Permalink to this definition"></a></dt>
<dd><p>callback for finding time-series using a search-expression.
Called everytime the .find() method is called.
The signature of the callback function should be fcb(search_expr: str)-&gt;TsInfoVector</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft</span> <span class="kn">import</span> <span class="n">time_series</span> <span class="k">as</span> <span class="n">sa</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">find_ts</span><span class="p">(</span><span class="n">search_expr</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">sa</span><span class="o">.</span><span class="n">TsInfoVector</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;find:&#39;</span><span class="p">,</span><span class="n">search_expr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">r</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">TsInfoVector</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tsi</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">TsInfo</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">tsi</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;some_test&#39;</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">r</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tsi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and then bind the function to the callback</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">=</span><span class="n">sa</span><span class="o">.</span><span class="n">DtsServer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">.</span><span class="n">find_cb</span><span class="o">=</span><span class="n">find_ts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">.</span><span class="n">set_listening_port</span><span class="p">(</span><span class="mi">20000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># more code to invoce .find etc.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.fire_cb">
<span class="sig-name descname"><span class="pre">fire_cb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(StringVector)msg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)rp</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.fire_cb" title="Permalink to this definition"></a></dt>
<dd><p>testing fire cb from c++</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.flush_cache">
<span class="sig-name descname"><span class="pre">flush_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(StringVector)ts_ids</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.flush_cache" title="Permalink to this definition"></a></dt>
<dd><p>flushes the <em>specified</em> ts_ids from cache
Has only effect for ts-ids that are in cache, non-existing items are ignored</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ts_ids</strong> (<em>StringVector</em>) – a list of time-series ids to flush out</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.flush_cache_all">
<span class="sig-name descname"><span class="pre">flush_cache_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.flush_cache_all" title="Permalink to this definition"></a></dt>
<dd><p>flushes all items out of cache (cache_stats remain un-touched)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.geo_ts_read_cb">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">geo_ts_read_cb</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.geo_ts_read_cb" title="Permalink to this definition"></a></dt>
<dd><p>Callback for reading  geo_ts db.
Called everytime there is a need for geo_ts not stored in cached.
The signature of the callback function should be grcb(cfg:GeoTimeSeriesConfiguration, slice:GeoSlice)-&gt;GeoMatrix</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.geo_ts_store_cb">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">geo_ts_store_cb</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.geo_ts_store_cb" title="Permalink to this definition"></a></dt>
<dd><p>callback for storing to geo_ts db.
Called everytime the client.store_geo_ts() method is called.
The signature of the callback function should be gscb(cfg:GeoTimeSeriesConfiguration, tsm:GeoMatrix, replace:bool)-&gt;None</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.get_listening_ip">
<span class="sig-name descname"><span class="pre">get_listening_ip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.get_listening_ip" title="Permalink to this definition"></a></dt>
<dd><p>Get the current ip listen address</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>listening ip. note that 0.0.0.0 means listening for all interfaces</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.get_listening_port">
<span class="sig-name descname"><span class="pre">get_listening_port</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.get_listening_port" title="Permalink to this definition"></a></dt>
<dd><p>returns the port number it’s listening at for serving incoming request</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.get_max_connections">
<span class="sig-name descname"><span class="pre">get_max_connections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.get_max_connections" title="Permalink to this definition"></a></dt>
<dd><p>returns the maximum number of connections to be served concurrently</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.graceful_close_timeout_ms">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">graceful_close_timeout_ms</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.graceful_close_timeout_ms" title="Permalink to this definition"></a></dt>
<dd><p>how long to let a connection linger after message is processed to allow for
flushing out reply to client.
Ref to dlib.net dlib.net/dlib/server/server_kernel_abstract.h.html</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.is_running">
<span class="sig-name descname"><span class="pre">is_running</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.is_running" title="Permalink to this definition"></a></dt>
<dd><p>true if server is listening and running</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>start_async(),process_messages(msec)</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.process_messages">
<span class="sig-name descname"><span class="pre">process_messages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)msec</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.process_messages" title="Permalink to this definition"></a></dt>
<dd><p>wait and process messages for specified number of msec before returning
the dtss-server is started if not already running</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>msec</strong> (<em>int</em>) – number of millisecond to process messages</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>this method releases GIL so that callbacks are not blocked when the</p>
<p>dtss-threads perform the callback</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>cb,start_async(),is_running,clear()</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.remove_auth_tokens">
<span class="sig-name descname"><span class="pre">remove_auth_tokens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(StringVector)tokens</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.remove_auth_tokens" title="Permalink to this definition"></a></dt>
<dd><p>removes auth tokens, if it matches all available tokens, then deactivate auth requirement for clients</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>tokens</em>) – list of tokens, where each token is like <cite>Basic dXNlcjpwd2Q=</cite>, e.g: base64 user:pwd</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.set_auto_cache">
<span class="sig-name descname"><span class="pre">set_auto_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(bool)active</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.set_auto_cache" title="Permalink to this definition"></a></dt>
<dd><p>set auto caching all reads active or passive.
Default is off, and caching must be done through
explicit calls to .cache(ts_ids,ts_vector)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>active</strong> (<em>bool</em>) – if set True, all reads will be put into cache</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.set_can_remove">
<span class="sig-name descname"><span class="pre">set_can_remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(bool)can_remove</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.set_can_remove" title="Permalink to this definition"></a></dt>
<dd><p>Set whether the DtsServer support removing time-series
The default setting is false, su unless this method is called with true
as argument the server will not allow removing data using <cite>DtsClient.remove</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>can_remove</strong> (<em>bool</em>) – <code class="docutils literal notranslate"><span class="pre">true</span></code> if the server should allow removing data. <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.set_container">
<span class="sig-name descname"><span class="pre">set_container</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)root_dir</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(str)container_type=''</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.set_container" title="Permalink to this definition"></a></dt>
<dd><p>set ( or replaces) an internal shyft store container to the dtss-server.
All ts-urls with shyft://&lt;container&gt;/ will resolve
to this internal time-series storage for find/read/store operations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the container as pr. url definition above</p></li>
<li><p><strong>root_dir</strong> (<em>str</em>) – A valid directory root for the container</p></li>
<li><p><strong>container_type</strong> (<em>str</em>) – Container type to add.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>currently this call should only be used when the server is not processing messages, - before starting, or after stopping listening operations</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.set_geo_ts_db">
<span class="sig-name descname"><span class="pre">set_geo_ts_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesConfiguration)geo_ts_cfg</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.set_geo_ts_db" title="Permalink to this definition"></a></dt>
<dd><p>This add/replace a geo-ts database to the server, so that geo-related requests
can be resolved by means of this configuation and the geo-related callbacks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geo_ts_cfg</strong> (<em>GeoTimeseriesConfiguration</em>) – The configuration for the new geo-ts data-base</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.set_listening_ip">
<span class="sig-name descname"><span class="pre">set_listening_ip</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)ip</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.set_listening_ip" title="Permalink to this definition"></a></dt>
<dd><p>Set the ip address to specific interface ip. Must be called prior to the start server method</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>ip</em>) – ip address, like 127.0.0.1 for local host only interface</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.set_listening_port">
<span class="sig-name descname"><span class="pre">set_listening_port</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)port_no</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.set_listening_port" title="Permalink to this definition"></a></dt>
<dd><p>set the listening port for the service</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port_no</strong> (<em>int</em>) – a valid and available tcp-ip port number to listen on.</p></li>
<li><p><strong>20000</strong> (<em>typically it could be</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>nothing.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.set_master_slave_mode">
<span class="sig-name descname"><span class="pre">set_master_slave_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)ip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)master_poll_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)unsubscribe_threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)unsubscribe_max_delay</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.set_master_slave_mode" title="Permalink to this definition"></a></dt>
<dd><p>Set master-slave mode, redirecting all IO calls on this dtss to the master ip:port dtss.
This instance of the dtss is kept in sync with changes done on the master using subscription to changes on the master
Calculations, and caches are still done locally unloading the computational efforts from the master.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip</strong> (<em>str</em>) – The ip address where the master dtss is running</p></li>
<li><p><strong>port</strong> (<em>int</em>) – The port number for the master dtss</p></li>
<li><p><strong>master_poll_time</strong> (<a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time"><em>time</em></a>) – [s] max time between each update from master, typicall 0.1 s is ok</p></li>
<li><p><strong>unsubscribe_threshold</strong> (<em>int</em>) – minimum number of unsubscribed time-series before also unsubscribing from the master</p></li>
<li><p><strong>unsubscribe_max_delay</strong> (<em>int</em>) – maximum time to delay unsubscriptions, regardless number</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.set_max_connections">
<span class="sig-name descname"><span class="pre">set_max_connections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)max_connect</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.set_max_connections" title="Permalink to this definition"></a></dt>
<dd><p>limits simultaneous connections to the server (it’s multithreaded, and uses on thread pr. connect)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max_connect</strong> (<em>int</em>) – maximum number of connections before denying more connections</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>get_max_connections()</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.start_async">
<span class="sig-name descname"><span class="pre">start_async</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.start_async" title="Permalink to this definition"></a></dt>
<dd><p>start server listening in background, and processing messages</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>set_listening_port(port_no),set_listening_ip,is_running,cb,process_messages(msec)</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>port_no. the port used for listening operations, either the value as by set_listening_port, or if it was unspecified, a new available port</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>in</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>you should have setup up the callback, cb before calling start_async</p>
<p>Also notice that processing will acquire the GIL</p>
<blockquote>
<div><p>-so you need to release the GIL to allow for processing messages</p>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>process_messages(msec)</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.start_web_api">
<span class="sig-name descname"><span class="pre">start_web_api</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)host_ip</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)doc_root</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)fg_threads=2</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)bg_threads=4</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.start_web_api" title="Permalink to this definition"></a></dt>
<dd><p>starts the dtss web-api on the specified host_ip, port, doc_root and number of threads</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host_ip</strong> (<em>str</em>) – 0.0.0.0 for any interface, 127.0.0.1 for local only etc.</p></li>
<li><p><strong>port</strong> (<em>int</em>) – port number to serve the web_api on, ensure it’s available!</p></li>
<li><p><strong>doc_root</strong> (<em>str</em>) – directory from which we will serve http/https documents, like index.html etc.</p></li>
<li><p><strong>fg_threads</strong> (<em>int</em>) – number of web-api foreground threads, typical 1-4 depending on load</p></li>
<li><p><strong>bg_threads</strong> (<em>int</em>) – number of long running  background threads workers to serve dtss-request etc.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.stop_web_api">
<span class="sig-name descname"><span class="pre">stop_web_api</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsServer)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsServer.stop_web_api" title="Permalink to this definition"></a></dt>
<dd><p>Stops any ongoing web-api service</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsServer.store_ts_cb">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">store_ts_cb</span></span><a class="headerlink" href="#shyft.time_series.DtsServer.store_ts_cb" title="Permalink to this definition"></a></dt>
<dd><p>callback for storing time-series.
Called everytime the .store_ts() method is called and non-shyft urls are passed.
The signature of the callback function should be scb(tsv: TsVector)-&gt;None</p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft</span> <span class="kn">import</span> <span class="n">time_series</span> <span class="k">as</span> <span class="n">sa</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">store_ts</span><span class="p">(</span><span class="n">tsv</span><span class="p">:</span><span class="n">sa</span><span class="o">.</span><span class="n">TsVector</span><span class="p">)</span><span class="o">-&gt;</span><span class="kc">None</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;store:&#39;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">tsv</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># each member is a bound ref_ts with an url</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># extract the url, decode and store</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1">#</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1">#</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and then bind the function to the callback</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">=</span><span class="n">sa</span><span class="o">.</span><span class="n">DtsServer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">.</span><span class="n">store_ts_cb</span><span class="o">=</span><span class="n">store_ts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtss</span><span class="o">.</span><span class="n">set_listening_port</span><span class="p">(</span><span class="mi">20000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># more code to invoce .store_ts etc.</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-dtsclient">
<h3>Class DtsClient<a class="headerlink" href="#class-dtsclient" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">DtsClient</span></span><a class="headerlink" href="#shyft.time_series.DtsClient" title="Permalink to this definition"></a></dt>
<dd><p>The client side part of the distributed time series system(DTSS).
The DtsClient communicate with the DtsServer using an efficient raw socket protocol using boost binary serialization.
A typical operation would be that the DtsClient forwards TsVector (that represents lists and structures of time-series expressions) to the DtsServer(s),that takes care of binding unbound symbolic time-series, evaluate and return the results back to the DtsClient.
This class is closely related to the  <a class="reference internal" href="#shyft.time_series.DtsServer" title="shyft.time_series.DtsServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">DtsServer</span></code></a>  and useful reference is also  <a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector"><code class="xref py py-class docutils literal notranslate"><span class="pre">TsVector</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.add_geo_ts_db">
<span class="sig-name descname"><span class="pre">add_geo_ts_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesConfiguration)geo_cfg</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.add_geo_ts_db" title="Permalink to this definition"></a></dt>
<dd><p>Adds a new geo time-series database to the dtss-server with the given specifications</p>
<blockquote>
<div><p>geo_cfg (GeoTimeSeriesConfiguration): the configuration to be added to the server specifying the dimensionality etc.</p>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>.get_geo_db_ts_info()</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.cache_flush">
<span class="sig-name descname"><span class="pre">cache_flush</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.cache_flush" title="Permalink to this definition"></a></dt>
<dd><p>flush the cache (including statistics) on the server.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.cache_stats">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cache_stats</span></span><a class="headerlink" href="#shyft.time_series.DtsClient.cache_stats" title="Permalink to this definition"></a></dt>
<dd><p>get the cache_stats (including statistics) on the server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)timeout_ms=1000</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.close" title="Permalink to this definition"></a></dt>
<dd><p>close the connection</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.compress_expressions">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compress_expressions</span></span><a class="headerlink" href="#shyft.time_series.DtsClient.compress_expressions" title="Permalink to this definition"></a></dt>
<dd><p>if True, the expressions are compressed before sending to the server.
for expressions of any size, like 100 elements, with expression
depth 100 (e.g. nested sums), this can speed up
the transmission by a factor or 3.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TsVector)ts_vector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)utcperiod</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)use_ts_cached_read=True</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)update_ts_cache=False</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)clip_result=[not-valid-period&gt;</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.evaluate" title="Permalink to this definition"></a></dt>
<dd><p>Evaluates the expressions in the ts_vector.
If the expression includes unbound symbolic references to time-series,
these time-series will be passed to the binding service callback
on the serverside, passing on the specifed utcperiod.</p>
<dl class="simple">
<dt>NOTE: That the ts-backing-store, either cached or by read, will return data for:</dt><dd><ul class="simple">
<li><p>at least the period needed to evaluate the utcperiod</p></li>
<li><p>In case of cached result, this will currently involve the entire matching cached time-series segment.</p></li>
</ul>
</dd>
<dt>In particular, this means that the returned result <strong>could be larger</strong> than the specified utcperiod, unless you specify <cite>clip_result</cite></dt><dd><p>Other available methods, such as the expression (x.average(ta)), including time-axis,
can be used to exactly control the returned result size.
Also note that the semantics of utcperiod is
to ensure that enough data is read from the backend, so that it can evaluate the expressions.
Use clip_result argument to clip the time-range of the resulting time-series to fit your need if needed
- this will typically be in scenarios where you have not supplied time-axis operations (unbounded eval),
and you also are using caching.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts_vector</strong> (<a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector"><em>TsVector</em></a>) – a list of time-series (expressions), including unresolved symbolic references</p></li>
<li><p><strong>utcperiod</strong> (<a class="reference internal" href="#shyft.time_series.UtcPeriod" title="shyft.time_series.UtcPeriod"><em>UtcPeriod</em></a>) – the valid non-zero length period that the binding service should read from the backing ts-store/ts-service</p></li>
<li><p><strong>use_ts_cached_read</strong> (<em>bool</em>) – allow use of server-side cached results, use it for immutable data-reads!</p></li>
<li><p><strong>update_ts_cache</strong> (<em>bool</em>) – when reading time-series, also update the cache with the data, use it for immutable data-reads!</p></li>
<li><p><strong>clip_result</strong> (<a class="reference internal" href="#shyft.time_series.UtcPeriod" title="shyft.time_series.UtcPeriod"><em>UtcPeriod</em></a>) – If supplied, clip the time-range of the resulting time-series to cover evaluation f(t) over this period only</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsvector. an evaluated list of point time-series in the same order as the input list</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>.percentiles(),DtsServer</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.find">
<span class="sig-name descname"><span class="pre">find</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)search_expression</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsInfoVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.find" title="Permalink to this definition"></a></dt>
<dd><p>find ts information that matches the search-expression</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>search_expression</strong> (<em>str</em>) – search-expression, to be interpreted by the back-end tss server (usually by callback to python)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts_info_vector. The search result, as vector of TsInfo objects</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>TsInfoVector</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>TsInfo,TsInfoVector</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.geo_evaluate">
<span class="sig-name descname"><span class="pre">geo_evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)geo_ts_db_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(StringVector)variables</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(IntVector)ensembles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)time_axis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)ts_dt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoQuery)geo_range</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(bool)concat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)cc_dt0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)use_cache=True</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)update_cache=True</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoTsMatrix</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.geo_evaluate" title="Permalink to this definition"></a></dt>
<dd><p>Evaluates a geo-temporal query on the server, and return the results</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>geo_ts_db_name (string): The name of the geo_ts_db, e.g. arome, ec, arome_cc ec_cc etc.</p>
<p>variables (StringVector): list  of variables, like ‘temperature’,’precipitation’. If empty, return data for all available variables</p>
<p>ensembles (IntVector): list of ensembles to read, if empty return all available</p>
<p>time_axis (TimeAxis): return geo_ts where t0 matches time-points of this time-axis. If concat, the ta.total_period().end determines how long to extend latest forecast</p>
<p>ts_dt (time): specifies the length of the time-slice to read from each time-series</p>
<p>geo_range (GeoQuery): Specify polygon to include, empty means all</p>
<p>concat (bool): If true, the geo_ts for each ensemble/point is joined together to form one singe time-series, concatenating a slice from each of the forecasts</p>
<p>cc_dt0 (time): concat delta time to skip from beginning of each geo_ts, so you can specify 3h, then select +3h.. slice-end from each forecast</p>
<p>use_cache (bool): use cache if available(speedup)</p>
<p>update_cache (bool): if reading data from backend, also stash it to the cache for faster evaluations</p>
</dd>
<dt>Returns:</dt><dd><p>GeoMatrix: r. A matrix where the elements are GeoTimeSeries, accessible using indicies time,variable, ensemble, t0</p>
</dd>
<dt>See also:</dt><dd><p>.get_geo_ts_db_info()</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>geo_evaluate( (DtsClient)self, (GeoEvalArgs)eval_args, (bool)use_cache, (bool)update_cache) -&gt; GeoTsMatrix :</dt><dd><p>Evaluates a geo-temporal query on the server, and return the results</p>
<dl>
<dt>Args:</dt><dd><p>eval_args (GeoEvalArgs): complete set of arguments for geo-evaluation, including geo-db, scope for variables, ensembles, time and geo-range</p>
<p>use_cache (bool): use cache if available(speedup)</p>
<p>update_cache (bool): if reading data from backend, also stash it to the cache for faster evaluations</p>
</dd>
<dt>Returns:</dt><dd><p>GeoMatrix: r. A matrix where the elements are GeoTimeSeries, accessible using indicies time,variable, ensemble, t0</p>
</dd>
<dt>See also:</dt><dd><p>.get_geo_ts_db_info()</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.geo_store">
<span class="sig-name descname"><span class="pre">geo_store</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)geo_ts_db_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoMatrix)tsm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(bool)replace</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(bool)cache</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.geo_store" title="Permalink to this definition"></a></dt>
<dd><p>Store a ts-matrix with needed dimensions and data to the specified geo-ts-db</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geo_ts_db_name</strong> (<em>string</em>) – The name of the geo_ts_db, e.g. arome, ec, arome_cc ec_cc etc.</p></li>
<li><p><strong>tsm</strong> (<em>TsMatrix</em>) – A dense matrix with dimensionality complete for variables, ensembles and geo-points,flexible time-dimension 1..n</p></li>
<li><p><strong>replace</strong> (<em>bool</em>) – Replace existing forecasts, do not merge-store points</p></li>
<li><p><strong>cache</strong> (<em>bool</em>) – Also put values to the cache</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>.get_geo_ts_db_info(),.geo_evaluate</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.get_geo_db_ts_info">
<span class="sig-name descname"><span class="pre">get_geo_db_ts_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoTimeSeriesConfigurationVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.get_geo_db_ts_info" title="Permalink to this definition"></a></dt>
<dd><p>Returns the configured geo-ts data-bases on the server, so queries can be specified and formulated</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ol class="loweralpha simple" start="18">
<li><p>A strongly typed list of GeoTimeseriesConfiguration</p></li>
</ol>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>GeoTimeseriesConfigurationVector</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>.geo_evaluate()</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.get_ts_info">
<span class="sig-name descname"><span class="pre">get_ts_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)ts_url</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsInfo</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.get_ts_info" title="Permalink to this definition"></a></dt>
<dd><p>Get ts information for a time-series from the backend</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ts_url</strong> (<em>str</em>) – Time-series url to lookup ts info for</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts_info. A TsInfo object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsInfo" title="shyft.time_series.TsInfo">TsInfo</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>TsInfo</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.merge_store_ts_points">
<span class="sig-name descname"><span class="pre">merge_store_ts_points</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TsVector)tsv</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)cache_on_write=False</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.merge_store_ts_points" title="Permalink to this definition"></a></dt>
<dd><p>Merge the ts-points supplied in the tsv into the existing time-series on the server side.
The effect of each ts is similar to <strong>as if</strong>:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><strong>read</strong> ts.total_period() from ts point store</p></li>
<li><p><strong>in memory appy</strong> the TimeSeries.merge_points(ts) on the read-ts</p></li>
<li><p><strong>write</strong> the resulting merge-result back to the ts-store</p></li>
</ol>
</div></blockquote>
<p>This function is suitable for typical data-collection tasks
where the points collected is from an external source, appears as batches,
that should just be added to the existing point-set</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tsv</strong> (<a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector"><em>TsVector</em></a>) – ts-vector with time-series, url-reference and values to be stored at dtss server</p></li>
<li><p><strong>cache_on_write</strong> (<em>bool</em>) – if set True, the written contents is also put into the read-cache of the dtss, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>TsVector</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.percentiles">
<span class="sig-name descname"><span class="pre">percentiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TsVector)ts_vector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(UtcPeriod)utcperiod</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)time_axis</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(IntVector)percentile_list</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)use_ts_cached_read=True</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)update_ts_cache=False</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TsVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.percentiles" title="Permalink to this definition"></a></dt>
<dd><p>Evaluates the expressions in the ts_vector for the specified utcperiod.
If the expression includes unbound symbolic references to time-series,
these time-series will be passed to the binding service callback
on the serverside.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts_vector</strong> (<a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector"><em>TsVector</em></a>) – a list of time-series (expressions), including unresolved symbolic references</p></li>
<li><p><strong>utcperiod</strong> (<a class="reference internal" href="#shyft.time_series.UtcPeriod" title="shyft.time_series.UtcPeriod"><em>UtcPeriod</em></a>) – the valid non-zero length period that the binding service should read from the backing ts-store/ts-service</p></li>
<li><p><strong>time_axis</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – the time_axis for the percentiles, e.g. a weekly time_axis</p></li>
<li><p><strong>percentile_list</strong> (<em>IntVector</em>) – a list of percentiles, where -1 means true average, 25=25percentile etc</p></li>
<li><p><strong>use_ts_cached_read</strong> (<em>bool</em>) – allow use of server-side cached results, use it for immutable data-reads!</p></li>
<li><p><strong>update_ts_cache</strong> (<em>bool</em>) – when reading time-series, also update the cache with the data, use it for immutable data-reads!</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsvector. an evaluated list of percentile time-series in the same order as the percentile input list</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector">TsVector</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>.evaluate(), DtsServer</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_ack">
<span class="sig-name descname"><span class="pre">q_ack</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)msg_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)diagnostics</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_ack" title="Permalink to this definition"></a></dt>
<dd><p>After q_get, q_ack confirms that the message is ok/handled back to the process that called q_put.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>)</strong> (<em>diagnostics</em>) – the name of the queue</p></li>
<li><p><strong>(</strong><strong>)</strong> – the msg_id, required to be unique within current messages keept by the queue</p></li>
<li><p><strong>(</strong><strong>)</strong> – the freetext diagnostics to but along with the message, we recommend json formatted</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_add">
<span class="sig-name descname"><span class="pre">q_add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_add" title="Permalink to this definition"></a></dt>
<dd><p>Add a a named queue to the dtss server</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>name</em>) – the name of the new queue, required to be unique</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_get">
<span class="sig-name descname"><span class="pre">q_get</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)max_wait</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">QueueMessage</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_get" title="Permalink to this definition"></a></dt>
<dd><p>Get a message out from the named queue, waiting max_wait time for it if it’s not already there.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>)</strong> (<em>max_wait</em>) – the name of the queue</p></li>
<li><p><strong>(</strong><strong>)</strong> – max_time to wait for message to arrive</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>q_msg. A queue message consisting of .info describing the message, and the time-series vector .tsv</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_list">
<span class="sig-name descname"><span class="pre">q_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">StringVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_list" title="Permalink to this definition"></a></dt>
<dd><p>returns a list of defined queues on the dtss server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_maintain">
<span class="sig-name descname"><span class="pre">q_maintain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(bool)keep_ttl_items</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)flush_all=False</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_maintain" title="Permalink to this definition"></a></dt>
<dd><p>Maintains, removes items that has passed through the queue, and are marked as done.
To flush absolutely all items, pass flush_all=True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>)</strong> (<em>flush_all</em>) – the name of the queue</p></li>
<li><p><strong>(</strong><strong>)</strong> – If true, the ttl set for the done messages are respected, and they are not removed until the create+ttl has expired</p></li>
<li><p><strong>(</strong><strong>)</strong> – removes all items in the queue and kept by the queue, the queue is emptied</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_msg_info">
<span class="sig-name descname"><span class="pre">q_msg_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)msg_id</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">QueueMessageInfo</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_msg_info" title="Permalink to this definition"></a></dt>
<dd><p>From the specified queue, fetch info about specified msg_id.
By inspecting the provided information, one can see when the messaage is created, fetched, and done with.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>)</strong> (<em>msg_id</em>) – the name of the queue</p></li>
<li><p><strong>(</strong><strong>)</strong> – the msg_id</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>msg_info. the information/state of the identified message</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_msg_infos">
<span class="sig-name descname"><span class="pre">q_msg_infos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">QueueMessageInfoVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_msg_infos" title="Permalink to this definition"></a></dt>
<dd><p>Returns all message informations from a queue, including not yet pruned fetched/done messages</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>name</em>) – the name of the queue</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>msg_infos. the list of information keept in the named queue</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_put">
<span class="sig-name descname"><span class="pre">q_put</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)msg_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)description</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)ttl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TsVector)tsv</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_put" title="Permalink to this definition"></a></dt>
<dd><p>Put a message, as specified with the supplied parameters, into the specified named queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>)</strong> (<em>tsv</em>) – the name of the queue</p></li>
<li><p><strong>(</strong><strong>)</strong> – the msg_id, required to be unique within current messages keept by the queue</p></li>
<li><p><strong>(</strong><strong>)</strong> – the freetext description to but along with the message, we recommend json formatted</p></li>
<li><p><strong>(</strong><strong>)</strong> – time-to-live for the message after done, if specified, the q_maintain process can be asked to keep done messages that have ttl</p></li>
<li><p><strong>(</strong><strong>)</strong> – time-series vector, with the wanted payload of time-series</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_remove">
<span class="sig-name descname"><span class="pre">q_remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_remove" title="Permalink to this definition"></a></dt>
<dd><p>Removes a named queue from dtss server, including all data in flight on the queue</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>name</em>) – the name of the queue</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.q_size">
<span class="sig-name descname"><span class="pre">q_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)name</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.q_size" title="Permalink to this definition"></a></dt>
<dd><p>Returns number of queue messages waiting to be read by q_get.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>)</strong> (<em>name</em>) – the name of the queue</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>unread count. number of elements queued up</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.remove">
<span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)ts_url</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.remove" title="Permalink to this definition"></a></dt>
<dd><p>Remove a time-series from the dtss backend
The time-series referenced by <code class="docutils literal notranslate"><span class="pre">ts_url</span></code> is removed from the backend DtsServer.
Note that the DtsServer may prohibit removing time-series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ts_url</strong> (<em>str</em>) – shyft url referencing a time series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.remove_geo_ts_db">
<span class="sig-name descname"><span class="pre">remove_geo_ts_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(str)geo_ts_db_name</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.remove_geo_ts_db" title="Permalink to this definition"></a></dt>
<dd><p>Remove the specified geo time-series database from dtss-server</p>
<blockquote>
<div><p>geo_ts_db_name (string): the name of the geo-ts-database to be removed</p>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>.get_geo_db_ts_info(),add_geo_ts_db()</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.reopen">
<span class="sig-name descname"><span class="pre">reopen</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)timeout_ms=1000</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.reopen" title="Permalink to this definition"></a></dt>
<dd><p>(re)open a connection after close or server restart</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.store_ts">
<span class="sig-name descname"><span class="pre">store_ts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(DtsClient)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TsVector)tsv</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)overwrite_on_write=True</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(bool)cache_on_write=False</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.DtsClient.store_ts" title="Permalink to this definition"></a></dt>
<dd><p>Store the time-series in the ts-vector in the dtss backend.
The current internal shyft-container implementation overwrite the data by default, but can
update existing data if called with <cite>overwrite_on_write = False</cite>.
The intention is that the backend should overwrite the time-period they cover with
the new time-points unless asked explisitly to update it.
The time-series should be created like this, with url and a concrete point-ts:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span>  <span class="n">a</span><span class="o">=</span><span class="n">sa</span><span class="o">.</span><span class="n">TimeSeries</span><span class="p">(</span><span class="n">ts_url</span><span class="p">,</span><span class="n">ts_points</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="n">tsv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tsv</strong> (<a class="reference internal" href="#shyft.time_series.TsVector" title="shyft.time_series.TsVector"><em>TsVector</em></a>) – ts-vector with time-series, url-reference and values to be stored at dtss server</p></li>
<li><p><strong>overwrite_on_write</strong> (<em>bool</em>) – When False the backend updates existing data matching the time-series to be saved instead of overwriting. Defaults to True.</p></li>
<li><p><strong>cache_on_write</strong> (<em>bool</em>) – if set True, the written contents is also put into the read-cache of the dtss, defaults to False</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>TsVector</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.DtsClient.version">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">version</span></span><a class="headerlink" href="#shyft.time_series.DtsClient.version" title="Permalink to this definition"></a></dt>
<dd><p>returns the server version major.minor.patch string, if multiple servers, the version of the first is returned</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-tsinfo">
<h3>Class TsInfo<a class="headerlink" href="#class-tsinfo" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.TsInfo">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">TsInfo</span></span><a class="headerlink" href="#shyft.time_series.TsInfo" title="Permalink to this definition"></a></dt>
<dd><p>Gives some information from the backend ts data-store
about the stored time-series, that could be useful in some contexts</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TsInfo.created">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">created</span></span><a class="headerlink" href="#shyft.time_series.TsInfo.created" title="Permalink to this definition"></a></dt>
<dd><p>when time-series was created, seconds 1970s utc</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TsInfo.data_period">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">data_period</span></span><a class="headerlink" href="#shyft.time_series.TsInfo.data_period" title="Permalink to this definition"></a></dt>
<dd><p>the period for data-stored, if applicable</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TsInfo.delta_t">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">delta_t</span></span><a class="headerlink" href="#shyft.time_series.TsInfo.delta_t" title="Permalink to this definition"></a></dt>
<dd><p>time-axis steps, in seconds, 0 if irregular time-steps</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TsInfo.modified">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">modified</span></span><a class="headerlink" href="#shyft.time_series.TsInfo.modified" title="Permalink to this definition"></a></dt>
<dd><p>when time-series was last modified, seconds 1970 utc</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TsInfo.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#shyft.time_series.TsInfo.name" title="Permalink to this definition"></a></dt>
<dd><p>the unique name</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TsInfo.olson_tz_id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">olson_tz_id</span></span><a class="headerlink" href="#shyft.time_series.TsInfo.olson_tz_id" title="Permalink to this definition"></a></dt>
<dd><p>empty or time-axis calendar for calendar,t0,delta_t type time-axis</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.TsInfo.point_fx">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">point_fx</span></span><a class="headerlink" href="#shyft.time_series.TsInfo.point_fx" title="Permalink to this definition"></a></dt>
<dd><p>how to interpret the points, instant value, or average over period</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-cachestats">
<h3>Class CacheStats<a class="headerlink" href="#class-cachestats" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.CacheStats">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">CacheStats</span></span><a class="headerlink" href="#shyft.time_series.CacheStats" title="Permalink to this definition"></a></dt>
<dd><p>Cache statistics for the DtsServer.</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.CacheStats.coverage_misses">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">coverage_misses</span></span><a class="headerlink" href="#shyft.time_series.CacheStats.coverage_misses" title="Permalink to this definition"></a></dt>
<dd><p>number of misses where we did find the time-series id, but the period coverage was insufficient</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.CacheStats.fragment_count">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fragment_count</span></span><a class="headerlink" href="#shyft.time_series.CacheStats.fragment_count" title="Permalink to this definition"></a></dt>
<dd><p>number of time-series fragments in the cache, (greater or equal to id_count)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.CacheStats.hits">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hits</span></span><a class="headerlink" href="#shyft.time_series.CacheStats.hits" title="Permalink to this definition"></a></dt>
<dd><p>number of hits by time-series id</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.CacheStats.id_count">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">id_count</span></span><a class="headerlink" href="#shyft.time_series.CacheStats.id_count" title="Permalink to this definition"></a></dt>
<dd><p>number of unique time-series identities in cache</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.CacheStats.misses">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">misses</span></span><a class="headerlink" href="#shyft.time_series.CacheStats.misses" title="Permalink to this definition"></a></dt>
<dd><p>number of misses by time-series id</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.CacheStats.point_count">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">point_count</span></span><a class="headerlink" href="#shyft.time_series.CacheStats.point_count" title="Permalink to this definition"></a></dt>
<dd><p>total number of time-series points in the cache</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="geo-location-time-series">
<h2>Geo-location Time series<a class="headerlink" href="#geo-location-time-series" title="Permalink to this headline"></a></h2>
<p>The elements in this section integrate the generic time series concepts above
with a geo-spatial co-ordinate system. This functionality extends to co-ordinate
based queries in the time series storage.</p>
<div class="section" id="class-geopoint">
<h3>Class GeoPoint<a class="headerlink" href="#class-geopoint" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoPoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoPoint</span></span><a class="headerlink" href="#shyft.time_series.GeoPoint" title="Permalink to this definition"></a></dt>
<dd><p>GeoPoint commonly used in the shyft::core for
representing a 3D point in the terrain model.
The primary usage is in geo-located time-series and the interpolation routines</p>
<p>Absolutely a primitive point model aiming for efficiency and simplicity.</p>
<p>Units of x,y,z are metric, z positive upwards to sky, represents elevation
x is east-west axis
y is south-north axis</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoPoint.difference">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">difference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoPoint)a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoPoint)b</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoPoint</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoPoint.difference" title="Permalink to this definition"></a></dt>
<dd><p>returns GeoPoint(a.x - b.x, a.y - b.y, a.z - b.z)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoPoint.distance2">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">distance2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoPoint)a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoPoint)b</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoPoint.distance2" title="Permalink to this definition"></a></dt>
<dd><p>returns the euclidian distance^2</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoPoint.distance_measure">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">distance_measure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoPoint)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoPoint)a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)p</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoPoint.distance_measure" title="Permalink to this definition"></a></dt>
<dd><p>return sum(a-b)^p</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoPoint.xy_distance">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">xy_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoPoint)a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoPoint)b</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoPoint.xy_distance" title="Permalink to this definition"></a></dt>
<dd><p>returns sqrt((a.x - b.x)*(a.x - b.x) + (a.y - b.y)*(a.y - b.y))</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoPoint.zscaled_distance">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">zscaled_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoPoint)a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoPoint)b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)zscale</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoPoint.zscaled_distance" title="Permalink to this definition"></a></dt>
<dd><p>sqrt( (a.x - b.x)*(a.x - b.x) + (a.y - b.y)*(a.y - b.y) + (a.z - b.z)*(a.z - b.z)*zscale*zscale)</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-geotimeseries">
<h3>Class GeoTimeSeries<a class="headerlink" href="#class-geotimeseries" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeries">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoTimeSeries</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeries" title="Permalink to this definition"></a></dt>
<dd><p>A minimal geo-located time-series, a time-series plus a representative 3d mid_point</p>
</dd></dl>

</div>
<div class="section" id="class-geotimeseriesvector">
<h3>Class GeoTimeSeriesVector<a class="headerlink" href="#class-geotimeseriesvector" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesVector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoTimeSeriesVector</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesVector" title="Permalink to this definition"></a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesVector.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesVector)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesVector.append" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesVector.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesVector)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesVector.extend" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesVector.values_at_time">
<span class="sig-name descname"><span class="pre">values_at_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesVector)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DoubleVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesVector.values_at_time" title="Permalink to this definition"></a></dt>
<dd><p>The values at specified time as a DoubleVector, that you can use .to_numpy() to get np array from
This function can be suitable if you are doing area-animated (birds-view) presentations</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>t</strong> (<a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time"><em>time</em></a>) – the time that should be used for getting each value</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>values. The evaluated geo.ts(t) for all items in the vector</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DoubleVector</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-geoquery">
<h3>Class GeoQuery<a class="headerlink" href="#class-geoquery" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoQuery">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoQuery</span></span><a class="headerlink" href="#shyft.time_series.GeoQuery" title="Permalink to this definition"></a></dt>
<dd><p>A query as a polygon with specified geo epsg coordinate system</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoQuery.epsg">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">epsg</span></span><a class="headerlink" href="#shyft.time_series.GeoQuery.epsg" title="Permalink to this definition"></a></dt>
<dd><p>the epsg coordinate system</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoQuery.polygon">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">polygon</span></span><a class="headerlink" href="#shyft.time_series.GeoQuery.polygon" title="Permalink to this definition"></a></dt>
<dd><p>the polygon giving the spatial scope</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-geoslice">
<h3>Class GeoSlice<a class="headerlink" href="#class-geoslice" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoSlice">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoSlice</span></span><a class="headerlink" href="#shyft.time_series.GeoSlice" title="Permalink to this definition"></a></dt>
<dd><p>Keeps data that describes as slice into the t0-variable-ensemble-geo, (t,v,e,g), space.
It is the result-type of GeoTimeSeriesConfiguration.compute(GeoEvalArgs)
and is passed to the geo-db-read callback to specify wanted time-series to read.
Note that the content of a GeoSlice can only be interpreteded in terms of the
GeoTimeSeriesConfiguration it is derived from.
The indicies and values of the slice, strongly relates to the definition of it’s geo-tsdb.</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoSlice.e">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">e</span></span><a class="headerlink" href="#shyft.time_series.GeoSlice.e" title="Permalink to this definition"></a></dt>
<dd><p>list of ensembles, each in range 0..GeoTimeSeriesConfiguration.n_ensembles-1</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoSlice.g">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">g</span></span><a class="headerlink" href="#shyft.time_series.GeoSlice.g" title="Permalink to this definition"></a></dt>
<dd><p>list of geo-point idx, each defined by GeoTimeSeriesConfiguration.grid.points[i]</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoSlice.t">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">t</span></span><a class="headerlink" href="#shyft.time_series.GeoSlice.t" title="Permalink to this definition"></a></dt>
<dd><p>list of t0-time points, each of them should exist in GeoTimeSeriesConfiguration.t0_times</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoSlice.ts_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ts_dt</span></span><a class="headerlink" href="#shyft.time_series.GeoSlice.ts_dt" title="Permalink to this definition"></a></dt>
<dd><p>time length to read from each time-series, [t0 .. t0+ts_dt&gt;</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoSlice.v">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">v</span></span><a class="headerlink" href="#shyft.time_series.GeoSlice.v" title="Permalink to this definition"></a></dt>
<dd><p>list of variables idx, each defined by GeoTimeSeriesConfiguration.variables[i]</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-geotsmatrix">
<h3>Class GeoTsMatrix<a class="headerlink" href="#class-geotsmatrix" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoTsMatrix">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoTsMatrix</span></span><a class="headerlink" href="#shyft.time_series.GeoTsMatrix" title="Permalink to this definition"></a></dt>
<dd><p>GeoTsMatrix is 4d matrix,index dimensions <cite>(t0,variable,ensemble,geo_point)</cite>
to be understood as a slice of a geo-ts-db (slice could be the entire db)
The element types of the matrix is  <a class="reference internal" href="#shyft.time_series.GeoTimeSeries" title="shyft.time_series.GeoTimeSeries"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeoTimeSeries</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTsMatrix.concatenate">
<span class="sig-name descname"><span class="pre">concatenate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTsMatrix)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)cc_dt0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)concat_interval</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoTsMatrix</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTsMatrix.concatenate" title="Permalink to this definition"></a></dt>
<dd><p>Concatenate all the forecasts in the GeoTsMatrix using supplied parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cc_dt0</strong> (<a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time"><em>time</em></a>) – skip first period of length cc_dt0 each forecast</p></li>
<li><p><strong>concat_interval</strong> (<a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time"><em>time</em></a>) – the nominal length between each ts.time(0) of all time-series</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tsm. A new concatenated geo-ts-matix</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.GeoTsMatrix" title="shyft.time_series.GeoTsMatrix">GeoTsMatrix</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTsMatrix.get_geo_point">
<span class="sig-name descname"><span class="pre">get_geo_point</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTsMatrix)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)e</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)g</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoPoint</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTsMatrix.get_geo_point" title="Permalink to this definition"></a></dt>
<dd><p>return self[t,v,e,g].mid_point of type GeoPoint</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTsMatrix.get_ts">
<span class="sig-name descname"><span class="pre">get_ts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTsMatrix)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)e</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)g</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTsMatrix.get_ts" title="Permalink to this definition"></a></dt>
<dd><p>return self[t,v,e,g] of type TimeSeries</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTsMatrix.set_geo_point">
<span class="sig-name descname"><span class="pre">set_geo_point</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTsMatrix)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)e</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoPoint)point</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTsMatrix.set_geo_point" title="Permalink to this definition"></a></dt>
<dd><p>performs self[t,v,e,g].mid_point= point</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTsMatrix.set_ts">
<span class="sig-name descname"><span class="pre">set_ts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTsMatrix)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)e</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(int)g</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)ts</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTsMatrix.set_ts" title="Permalink to this definition"></a></dt>
<dd><p>performs self[t,v,e,g].ts= ts</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-geomatrixshape">
<h3>Class GeoMatrixShape<a class="headerlink" href="#class-geomatrixshape" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoMatrixShape">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoMatrixShape</span></span><a class="headerlink" href="#shyft.time_series.GeoMatrixShape" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</div>
<div class="section" id="class-geogridspec">
<h3>Class GeoGridSpec<a class="headerlink" href="#class-geogridspec" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoGridSpec">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoGridSpec</span></span><a class="headerlink" href="#shyft.time_series.GeoGridSpec" title="Permalink to this definition"></a></dt>
<dd><p>A point set for a geo-grid, but does not have to be a regular grid.
It serves the role of defining the spatial representative points for
a typical spatial  grid, e.g as for arome, or ec forecasts.</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoGridSpec.epsg">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">epsg</span></span><a class="headerlink" href="#shyft.time_series.GeoGridSpec.epsg" title="Permalink to this definition"></a></dt>
<dd><p>the epsg coordinate system</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoGridSpec.find_geo_match">
<span class="sig-name descname"><span class="pre">find_geo_match</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoGridSpec)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoQuery)geo_query</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">IntVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoGridSpec.find_geo_match" title="Permalink to this definition"></a></dt>
<dd><p>finds the points int the grid that is covered by the polygon of the geo_query
note: that currently we only consider the horizontal dimension when matching points</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geo_query</strong> (<a class="reference internal" href="#shyft.time_series.GeoQuery" title="shyft.time_series.GeoQuery"><em>GeoQuery</em></a>) – A polygon giving an area to capture</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>matches. a list of all points that is inside, or on the border of the specified polygon, in guaranteed ascending point index order</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>IntVector</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoGridSpec.points">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">points</span></span><a class="headerlink" href="#shyft.time_series.GeoGridSpec.points" title="Permalink to this definition"></a></dt>
<dd><p>the representative points of the spatial grid</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-geoevalargs">
<h3>Class GeoEvalArgs<a class="headerlink" href="#class-geoevalargs" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoEvalArgs">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoEvalArgs</span></span><a class="headerlink" href="#shyft.time_series.GeoEvalArgs" title="Permalink to this definition"></a></dt>
<dd><p>GeoEvalArgs is used for the geo-evaluate functions.</p>
<p>It describes scope for the geo-evaluate function, in terms of:</p>
<blockquote>
<div><ul class="simple">
<li><p>the geo-ts database identifier</p></li>
<li><p>variables to extract, by names</p></li>
<li><p>ensemble members (list of ints)</p></li>
<li><p>temporal, using <cite>t0</cite> from specified time-axis, <cite>+ ts_dt</cite> for time-range</p></li>
<li><p>spatial, using <cite>points</cite> for a polygon</p></li>
</ul>
</div></blockquote>
<p>and optionally:</p>
<blockquote>
<div><ul class="simple">
<li><p>the concat postprocessing with parameters</p></li>
</ul>
</div></blockquote>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoEvalArgs.cc_dt0">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">cc_dt0</span></span><a class="headerlink" href="#shyft.time_series.GeoEvalArgs.cc_dt0" title="Permalink to this definition"></a></dt>
<dd><p>concat lead-time</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoEvalArgs.concat">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">concat</span></span><a class="headerlink" href="#shyft.time_series.GeoEvalArgs.concat" title="Permalink to this definition"></a></dt>
<dd><p>postprocess using concatenated forecast, returns ‘one’ concatenated forecast from many</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoEvalArgs.ens">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ens</span></span><a class="headerlink" href="#shyft.time_series.GeoEvalArgs.ens" title="Permalink to this definition"></a></dt>
<dd><p>list of ensembles to return, empty=all, if specified &gt;0</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoEvalArgs.geo_range">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">geo_range</span></span><a class="headerlink" href="#shyft.time_series.GeoEvalArgs.geo_range" title="Permalink to this definition"></a></dt>
<dd><p>the spatial scope, as simple polygon</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoEvalArgs.geo_ts_db_id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">geo_ts_db_id</span></span><a class="headerlink" href="#shyft.time_series.GeoEvalArgs.geo_ts_db_id" title="Permalink to this definition"></a></dt>
<dd><p>the name for the config (keep it minimal)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoEvalArgs.t0_time_axis">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">t0_time_axis</span></span><a class="headerlink" href="#shyft.time_series.GeoEvalArgs.t0_time_axis" title="Permalink to this definition"></a></dt>
<dd><p>specifies the t0, and  .total_period().end is used as concact open-end fill-in length</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoEvalArgs.ts_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ts_dt</span></span><a class="headerlink" href="#shyft.time_series.GeoEvalArgs.ts_dt" title="Permalink to this definition"></a></dt>
<dd><p>specifies the time-length to read from  each time-series,t0.. t0+ts_dt,</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoEvalArgs.variables">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">variables</span></span><a class="headerlink" href="#shyft.time_series.GeoEvalArgs.variables" title="Permalink to this definition"></a></dt>
<dd><p>the human readable description of this geo ts db</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-geotimeseriesconfiguration">
<h3>Class GeoTimeSeriesConfiguration<a class="headerlink" href="#class-geotimeseriesconfiguration" title="Permalink to this headline"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">GeoTimeSeriesConfiguration</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration" title="Permalink to this definition"></a></dt>
<dd><p>Contain minimal  description to efficiently work with arome/ec  forecast data
It defines the spatial, temporal and ensemble dimensions available, and
provides means of mapping a GeoQuery to a set of ts_urls that
serves as keys for manipulating and assembling forcing input data
for example to the shyft hydrology region-models.</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.bounding_box">
<span class="sig-name descname"><span class="pre">bounding_box</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesConfiguration)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoSlice)slice</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoPointVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.bounding_box" title="Permalink to this definition"></a></dt>
<dd><p>Compute the 3D bounding_box, as two GeoPoints containing the min-max of x,y,z of points in the GeoSlice
Could be handy when generating queries to externally  stored geo-ts databases like netcdf etc.
See also convex_hull().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>slice</strong> (<a class="reference internal" href="#shyft.time_series.GeoSlice" title="shyft.time_series.GeoSlice"><em>GeoSlice</em></a>) – a geo-slice with specified dimensions in terms of t0, variables, ensembles,geo-points</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>bbox. with two GeoPoints, [0] keeping the minimum x,y,z, and [1] the maximum x,y,z</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../hydrology/api.html#shyft.hydrology.GeoPointVector" title="shyft.hydrology.GeoPointVector">GeoPointVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesConfiguration)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoEvalArgs)eval_args</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoSlice</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.compute" title="Permalink to this definition"></a></dt>
<dd><p>Compute the GeoSlice from evaluation arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>eval_args</strong> (<a class="reference internal" href="#shyft.time_series.GeoEvalArgs" title="shyft.time_series.GeoEvalArgs"><em>GeoEvalArgs</em></a>) – Specification to evaluate</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>geo_slice. A geo-slice describing (t0,v,e,g) computed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.GeoSlice" title="shyft.time_series.GeoSlice">GeoSlice</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.convex_hull">
<span class="sig-name descname"><span class="pre">convex_hull</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesConfiguration)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoSlice)slice</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoPointVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.convex_hull" title="Permalink to this definition"></a></dt>
<dd><p>Compute the 2D convex hull, as a list of GeoPoints describing the smallest convex planar polygon
containing all points in the slice wrt. x,y.
The returned point sequence is ‘closed’, i.e the first and last point in the sequence are equal.
See also bounding_box().</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>slice</strong> (<a class="reference internal" href="#shyft.time_series.GeoSlice" title="shyft.time_series.GeoSlice"><em>GeoSlice</em></a>) – a geo-slice with specified dimensions in terms of t0, variables, ensembles,geo-points</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>hull. containing the sequence of points of the convex hull polygon.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../hydrology/api.html#shyft.hydrology.GeoPointVector" title="shyft.hydrology.GeoPointVector">GeoPointVector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.create_geo_ts_matrix">
<span class="sig-name descname"><span class="pre">create_geo_ts_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesConfiguration)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoSlice)slice</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoTsMatrix</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.create_geo_ts_matrix" title="Permalink to this definition"></a></dt>
<dd><p>Creates a GeoTsMatrix(element type is GeoTimeSeries) to hold the values according to dimensionality of GeoSlice</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>slice</strong> (<a class="reference internal" href="#shyft.time_series.GeoSlice" title="shyft.time_series.GeoSlice"><em>GeoSlice</em></a>) – a geo-slice with specified dimensions in terms of t0, variables, ensembles,geo-points</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>geo_ts_matrix. ready to be filled in with points and time-series</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.GeoTsMatrix" title="shyft.time_series.GeoTsMatrix">GeoTsMatrix</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.create_ts_matrix">
<span class="sig-name descname"><span class="pre">create_ts_matrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesConfiguration)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoSlice)slice</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">GeoMatrix</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.create_ts_matrix" title="Permalink to this definition"></a></dt>
<dd><p>Creates a GeoMatrix (element type is TimeSeries only) to hold the values according to dimensionality of GeoSlice</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>slice</strong> (<a class="reference internal" href="#shyft.time_series.GeoSlice" title="shyft.time_series.GeoSlice"><em>GeoSlice</em></a>) – a geo-slice with specified dimensions in terms of t0, variables, ensembles,geo-points</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts_matrix. ready to be filled in time-series(they are all empty/null)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>GeoMatrix</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.description">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">description</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.description" title="Permalink to this definition"></a></dt>
<dd><p>the human readable description of this geo ts db</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dt</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.dt" title="Permalink to this definition"></a></dt>
<dd><p>the (max) length of each geo-ts, so geo_ts total_period is [t0..t0+dt&gt;</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.find_geo_match_ix">
<span class="sig-name descname"><span class="pre">find_geo_match_ix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(GeoTimeSeriesConfiguration)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(GeoQuery)geo_query</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">IntVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.find_geo_match_ix" title="Permalink to this definition"></a></dt>
<dd><p>Returns the indicies to the points that matches the geo_query (polygon)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>geo_query</strong> (<a class="reference internal" href="#shyft.time_series.GeoQuery" title="shyft.time_series.GeoQuery"><em>GeoQuery</em></a>) – The query, polygon that matches the spatial scope</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>point_indexes. The list of indicies that  matches the geo_query</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>IntVector</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.grid">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">grid</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.grid" title="Permalink to this definition"></a></dt>
<dd><p>the spatial grid definition</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.n_ensembles">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">n_ensembles</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.n_ensembles" title="Permalink to this definition"></a></dt>
<dd><p>number of ensembles available, range 1..n</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.name" title="Permalink to this definition"></a></dt>
<dd><p>the name for the config (keep it minimal)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.prefix">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">prefix</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.prefix" title="Permalink to this definition"></a></dt>
<dd><p>// for externally stored parts</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>ts-url prefix, like shyft</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>// for internally stored ts, or geo</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.t0_time_axis">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">t0_time_axis</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.t0_time_axis" title="Permalink to this definition"></a></dt>
<dd><p>t0 time-points as time-axis</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.t0_times">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">t0_times</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.t0_times" title="Permalink to this definition"></a></dt>
<dd><p>list of time-points, where there are registred/available time-series</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.GeoTimeSeriesConfiguration.variables">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">variables</span></span><a class="headerlink" href="#shyft.time_series.GeoTimeSeriesConfiguration.variables" title="Permalink to this definition"></a></dt>
<dd><p>the list of available properties, like short keys for preciptation,temperature etc</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="working-with-time-series">
<h2>Working with time series<a class="headerlink" href="#working-with-time-series" title="Permalink to this headline"></a></h2>
<p>The elements in this section define how code shall behave or are actual tools
dealing with time series.</p>
<div class="section" id="policies">
<h3>Policies<a class="headerlink" href="#policies" title="Permalink to this headline"></a></h3>
<p>The elements in this section describe how time series are interpreted.</p>
<div class="section" id="class-convolve-policy">
<h4>Class convolve_policy<a class="headerlink" href="#class-convolve-policy" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.convolve_policy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">convolve_policy</span></span><a class="headerlink" href="#shyft.time_series.convolve_policy" title="Permalink to this definition"></a></dt>
<dd><p>Ref TimeSeries.convolve_w function, this policy determine how to handle initial conditions
<cite>USE_NEAREST</cite>: value(0) is used for all values before value(0), and value(n-1) is used for all values after value(n-1) == ‘mass preserving’
<cite>USE_ZERO</cite> : use zero for all values before value(0) or after value(n-1) == ‘shape preserving’
<cite>USE_NAN</cite>  : nan is used for all values outside the ts
<cite>BACKWARD</cite> : filter is ‘backward looking’ == boundary handling in the beginning of ts
<cite>FORWARD</cite>  : filter is ‘forward looking’ == boundary handling in the end of ts
<cite>CENTER</cite>   : filter is centered == boundary handling in both ends</p>
</dd></dl>

</div>
<div class="section" id="class-derivative-method">
<h4>Class derivative_method<a class="headerlink" href="#class-derivative-method" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.derivative_method">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">derivative_method</span></span><a class="headerlink" href="#shyft.time_series.derivative_method" title="Permalink to this definition"></a></dt>
<dd><p>Ref. the .derivative time-series function, this defines how to compute the
derivative of a given time-series</p>
</dd></dl>

</div>
<div class="section" id="class-extend-fill-policy">
<h4>Class extend_fill_policy<a class="headerlink" href="#class-extend-fill-policy" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.extend_fill_policy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">extend_fill_policy</span></span><a class="headerlink" href="#shyft.time_series.extend_fill_policy" title="Permalink to this definition"></a></dt>
<dd><p>Ref TimeSeries.extend function, this policy determines how to represent values in a gap
EPF_NAN : use nan values in the gap
EPF_LAST: use the last value before the gap
EPF_FILL: use a supplied value in the gap</p>
</dd></dl>

</div>
<div class="section" id="class-extend-split-policy">
<h4>Class extend_split_policy<a class="headerlink" href="#class-extend-split-policy" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.extend_split_policy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">extend_split_policy</span></span><a class="headerlink" href="#shyft.time_series.extend_split_policy" title="Permalink to this definition"></a></dt>
<dd><p>Ref TimeSeries.extend function, this policy determines where to split/shift from one ts to the other
EPS_LHS_LAST : use nan values in the gap
EPS_RHS_FIRST: use the last value before the gap
EPS_VALUE    : use a supplied value in the gap</p>
</dd></dl>

</div>
<div class="section" id="class-interpolation-scheme">
<h4>Class interpolation_scheme<a class="headerlink" href="#class-interpolation-scheme" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.interpolation_scheme">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">interpolation_scheme</span></span><a class="headerlink" href="#shyft.time_series.interpolation_scheme" title="Permalink to this definition"></a></dt>
<dd><p>Interpolation methods used by TimeSeries.transform</p>
</dd></dl>

</div>
<div class="section" id="class-point-interpretation-policy">
<h4>Class point_interpretation_policy<a class="headerlink" href="#class-point-interpretation-policy" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.point_interpretation_policy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">point_interpretation_policy</span></span><a class="headerlink" href="#shyft.time_series.point_interpretation_policy" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</div>
<div class="section" id="class-trim-policy">
<h4>Class trim_policy<a class="headerlink" href="#class-trim-policy" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.trim_policy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">trim_policy</span></span><a class="headerlink" href="#shyft.time_series.trim_policy" title="Permalink to this definition"></a></dt>
<dd><p>Enum to decide if to trim inwards or outwards where TRIM_IN means inwards</p>
</dd></dl>

</div>
</div>
<div class="section" id="tools">
<h3>Tools<a class="headerlink" href="#tools" title="Permalink to this headline"></a></h3>
<p>The elements in this section work with time series.</p>
<div class="section" id="class-krlsrbfpredictor">
<h4>Class KrlsRbfPredictor<a class="headerlink" href="#class-krlsrbfpredictor" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.KrlsRbfPredictor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">KrlsRbfPredictor</span></span><a class="headerlink" href="#shyft.time_series.KrlsRbfPredictor" title="Permalink to this definition"></a></dt>
<dd><p>Time-series predictor using the KRLS algorithm with radial basis functions.</p>
<p>The KRLS (Kernel Recursive Least-Squares) algorithm is a kernel regression
algorithm for aproximating data, the implementation used here is from:</p>
<p>This predictor uses KRLS with radial basis functions (RBF).
Other releated  <a class="reference internal" href="#shyft.time_series.TimeSeries.krls_interpolation" title="shyft.time_series.TimeSeries.krls_interpolation"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shyft.time_series.TimeSeries.krls_interpolation()</span></code></a>  <code class="xref py py-meth docutils literal notranslate"><span class="pre">shyft.time_series.TimeSeries.TimeSeries.get_krls_predictor()</span></code></p>
<p>Examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">shyft.time_series</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">Calendar</span><span class="p">,</span> <span class="n">utctime_now</span><span class="p">,</span> <span class="n">deltahours</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">TimeAxis</span><span class="p">,</span> <span class="n">TimeSeries</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">KrlsRbfPredictor</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># setup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span> <span class="o">=</span> <span class="n">Calendar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span> <span class="o">=</span> <span class="n">utctime_now</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">deltahours</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">365</span><span class="o">*</span><span class="mi">8</span>  <span class="c1"># one year</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ready plot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># shyft objects</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ta</span> <span class="o">=</span> <span class="n">TimeAxis</span><span class="p">(</span><span class="n">t0</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pred</span> <span class="o">=</span> <span class="n">KrlsRbfPredictor</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">dt</span><span class="o">=</span><span class="n">deltahours</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">gamma</span><span class="o">=</span><span class="mf">1e-5</span><span class="p">,</span>  <span class="c1"># NOTE: this should be 1e-3 for real data</span>
<span class="gp">... </span>    <span class="n">tolerance</span><span class="o">=</span><span class="mf">0.001</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># generate data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">total_series</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_range</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># to store the final data-ts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># -----</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total_series</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">data_range</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">data_range</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">)</span><span class="o">/</span><span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">ts</span> <span class="o">=</span> <span class="n">TimeSeries</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># -----</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">training_mse</span> <span class="o">=</span> <span class="n">pred</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>  <span class="c1"># train the predictor</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="c1"># -----</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;training step </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">:</span><span class="s1">2d</span><span class="si">}</span><span class="s1">: mse=</span><span class="si">{</span><span class="n">training_mse</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ta</span><span class="o">.</span><span class="n">time_points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ts</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="s1">&#39;bx&#39;</span><span class="p">)</span>  <span class="c1"># plot data</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># prediction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_pred</span> <span class="o">=</span> <span class="n">pred</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">ta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_mse</span> <span class="o">=</span> <span class="n">pred</span><span class="o">.</span><span class="n">mse_ts</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>  <span class="c1"># mse using 7 point wide filter</span>
<span class="gp">&gt;&gt;&gt; </span>                                    <span class="c1"># (3 points before/after)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># plot interpolation/predicton on top of results</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ta</span><span class="o">.</span><span class="n">time_points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ts_mse</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="s1">&#39;0.6&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mse&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ta</span><span class="o">.</span><span class="n">time_points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">ts_pred</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="s1">&#39;r-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;prediction&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.KrlsRbfPredictor.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(KrlsRbfPredictor)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.KrlsRbfPredictor.clear" title="Permalink to this definition"></a></dt>
<dd><p>Clear all training data from the predictor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.KrlsRbfPredictor.mse_ts">
<span class="sig-name descname"><span class="pre">mse_ts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(KrlsRbfPredictor)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)ts</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)points=0</span></span></em><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.KrlsRbfPredictor.mse_ts" title="Permalink to this definition"></a></dt>
<dd><p>Compute a mean-squared error time-series of the predictor relative to the supplied ts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – Time-series to compute mse against.</p></li>
<li><p><strong>points</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – Positive number of extra points around each point to use for mse.</p></li>
<li><p><strong>0.</strong> (<em>Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>mse_ts. Time-series with mean-squared error values.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>KrlsRbfPredictor.predictor_mse, KrlsRbfPredictor.predict</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.KrlsRbfPredictor.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(KrlsRbfPredictor)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeAxis)ta</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">TimeSeries</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.KrlsRbfPredictor.predict" title="Permalink to this definition"></a></dt>
<dd><p>Predict a time-series for for time-axis.</p>
<p class="rubric">Notes</p>
<p>The predictor will predict values outside the range of the values it is trained on, but these</p>
<p>values will often be zero. This may also happen if there are long gaps in the training data</p>
<p>and you try to predict values for the gap. Using wider basis functions partly remedies this,</p>
<p>but makes the prediction overall less accurate.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ta</strong> (<a class="reference internal" href="#shyft.time_series.TimeAxis" title="shyft.time_series.TimeAxis"><em>TimeAxis</em></a>) – Time-axis to predict values for.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ts. Predicted time-series.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries">TimeSeries</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>KrlsRbfPredictor.mse_ts, KrlsRbfPredictor.predictor_mse</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.KrlsRbfPredictor.predictor_mse">
<span class="sig-name descname"><span class="pre">predictor_mse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(KrlsRbfPredictor)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)ts</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)offset=0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)count=18446744073709551615</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)stride=1</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.KrlsRbfPredictor.predictor_mse" title="Permalink to this definition"></a></dt>
<dd><p>Compute the predictor mean-squared prediction error for count first from ts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – Time-series to compute mse against.</p></li>
<li><p><strong>offset</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – Positive offset from the start of the time-series. Default to 0.</p></li>
<li><p><strong>count</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – Positive number of samples from the time-series to to use.</p></li>
<li><p><strong>value.</strong> (<em>Default to the maximum</em>) – </p></li>
<li><p><strong>stride</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – Positive stride between samples from the time-series. Defaults to 1.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>KrlsRbfPredictor.predict, KrlsRbfPredictor.mse_ts</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.KrlsRbfPredictor.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(KrlsRbfPredictor)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(TimeSeries)ts</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)offset=0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)count=18446744073709551615</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)stride=1</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)iterations=1</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(object)mse_tol=0.001</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.KrlsRbfPredictor.train" title="Permalink to this definition"></a></dt>
<dd><p>Train the predictor using samples from ts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> (<a class="reference internal" href="#shyft.time_series.TimeSeries" title="shyft.time_series.TimeSeries"><em>TimeSeries</em></a>) – Time-series to train on.</p></li>
<li><p><strong>offset</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – Positive offset from the start of the time-series. Default to 0.</p></li>
<li><p><strong>count</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – Positive number of samples to to use. Default to the maximum value.</p></li>
<li><p><strong>stride</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – Positive stride between samples from the time-series. Defaults to 1.</p></li>
<li><p><strong>iterations</strong> (<em>int</em><em> (</em><em>optional</em><em>)</em>) – Positive maximum number of times to train on the samples. Defaults to 1.</p></li>
<li><p><strong>mse_tol</strong> (<em>float</em><em> (</em><em>optional</em><em>)</em>) – Positive tolerance for the mean-squared error over the training data.</p></li>
<li><p><strong>1E-9.</strong> (<em>If the mse after a training session is less than this skip training further. Defaults to</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>mse. Mean squared error of the predictor relative to the time-series trained on.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float (optional)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-qacparameter">
<h4>Class QacParameter<a class="headerlink" href="#class-qacparameter" title="Permalink to this headline"></a></h4>
<p>Qac = Quality Assurance Controls</p>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.QacParameter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">QacParameter</span></span><a class="headerlink" href="#shyft.time_series.QacParameter" title="Permalink to this definition"></a></dt>
<dd><p>The qac parameter controls how quailty checks are done, providing min-max range, plus repeated values checks
It also provides parameters that controls how the replacement/correction values are filled in,
like maximum time-span between two valid neighbour points that allows for linear/extension filling</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.QacParameter.constant_filler">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">constant_filler</span></span><a class="headerlink" href="#shyft.time_series.QacParameter.constant_filler" title="Permalink to this definition"></a></dt>
<dd><p>this is applied to values that fails quality checks, if no correction ts, and no interpolation/extension is active</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.QacParameter.max_timespan">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_timespan</span></span><a class="headerlink" href="#shyft.time_series.QacParameter.max_timespan" title="Permalink to this definition"></a></dt>
<dd><p>maximum timespan between two ok values that allow interpolation, or extension of values.If zero, no linear/extend correction</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time">time</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.QacParameter.max_v">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_v</span></span><a class="headerlink" href="#shyft.time_series.QacParameter.max_v" title="Permalink to this definition"></a></dt>
<dd><p>maximum value or nan for no maximum value limit</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.QacParameter.min_v">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">min_v</span></span><a class="headerlink" href="#shyft.time_series.QacParameter.min_v" title="Permalink to this definition"></a></dt>
<dd><p>minimum value or nan for no minimum value limit</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.QacParameter.repeat_allowed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repeat_allowed</span></span><a class="headerlink" href="#shyft.time_series.QacParameter.repeat_allowed" title="Permalink to this definition"></a></dt>
<dd><p>values that are allowed to repeat, within repeat-tolerance</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.QacParameter.repeat_timespan">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repeat_timespan</span></span><a class="headerlink" href="#shyft.time_series.QacParameter.repeat_timespan" title="Permalink to this definition"></a></dt>
<dd><p>maximum timespan the same value can be repeated (within repeat_tolerance).If zero, no repeat validation done</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time">time</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.QacParameter.repeat_tolerance">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">repeat_tolerance</span></span><a class="headerlink" href="#shyft.time_series.QacParameter.repeat_tolerance" title="Permalink to this definition"></a></dt>
<dd><p>values are considered repeated if they differ by less than repeat_tolerance</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="hydrology">
<h3>Hydrology<a class="headerlink" href="#hydrology" title="Permalink to this headline"></a></h3>
<p>The elements in this section are hydrology specific.</p>
<div class="section" id="class-icepackingparameters">
<h4>Class IcePackingParameters<a class="headerlink" href="#class-icepackingparameters" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.IcePackingParameters">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">IcePackingParameters</span></span><a class="headerlink" href="#shyft.time_series.IcePackingParameters" title="Permalink to this definition"></a></dt>
<dd><p>Parameter pack controlling ice packing computations.
See <cite>TimeSeries.ice_packing</cite> for usage.</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.IcePackingParameters.threshold_temperature">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">threshold_temperature</span></span><a class="headerlink" href="#shyft.time_series.IcePackingParameters.threshold_temperature" title="Permalink to this definition"></a></dt>
<dd><p>The threshold temperature for ice packing to occur. Ice packing will occur
when the average temperature in the <cite>window</cite> period is less than the threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.IcePackingParameters.threshold_window">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">threshold_window</span></span><a class="headerlink" href="#shyft.time_series.IcePackingParameters.threshold_window" title="Permalink to this definition"></a></dt>
<dd><p>The period back in seconds for which the average temperature is computed when
looking for ice packing.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time">time</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-icepackingrecessionparameters">
<h4>Class IcePackingRecessionParameters<a class="headerlink" href="#class-icepackingrecessionparameters" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.IcePackingRecessionParameters">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">IcePackingRecessionParameters</span></span><a class="headerlink" href="#shyft.time_series.IcePackingRecessionParameters" title="Permalink to this definition"></a></dt>
<dd><p>Parameter pack controlling ice packing recession computations.
See <cite>TimeSeries.ice_packing_recession</cite> for usage.</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.IcePackingRecessionParameters.alpha">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">alpha</span></span><a class="headerlink" href="#shyft.time_series.IcePackingRecessionParameters.alpha" title="Permalink to this definition"></a></dt>
<dd><p>Parameter controlling the curving of the recession curve.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.IcePackingRecessionParameters.recession_minimum">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">recession_minimum</span></span><a class="headerlink" href="#shyft.time_series.IcePackingRecessionParameters.recession_minimum" title="Permalink to this definition"></a></dt>
<dd><p>The minimum value of the recession curve.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-ice-packing-temperature-policy">
<h4>Class ice_packing_temperature_policy<a class="headerlink" href="#class-ice-packing-temperature-policy" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.ice_packing_temperature_policy">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">ice_packing_temperature_policy</span></span><a class="headerlink" href="#shyft.time_series.ice_packing_temperature_policy" title="Permalink to this definition"></a></dt>
<dd><p>Policy enum to specify how <cite>TimeSeries.ice_packing</cite> handles missing temperature values.</p>
<dl class="simple">
<dt>The enum defines three values:</dt><dd><ul class="simple">
<li><p><cite>DISALLOW_MISSING</cite> disallows any missing values. With this policy whenever a NaN value is encountered,
or the window of values to consider extends outside the range of the time series, a NaN value will be
written to the result time-series.</p></li>
<li><p><cite>ALLOW_INITIAL_MISSING</cite> disallows explicit NaN values, but allows the window of values to consider
to expend past the range of the time-series for the initial values.</p></li>
<li><p><cite>ALLOW_ANY_MISSING</cite> allow the window of values to contain NaN values, averaging what it can.
Only if all the values in the window is NaN, the result wil be NaN.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="class-ratingcurvefunction">
<h4>Class RatingCurveFunction<a class="headerlink" href="#class-ratingcurvefunction" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveFunction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">RatingCurveFunction</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveFunction" title="Permalink to this definition"></a></dt>
<dd><p>Combine multiple RatingCurveSegments into a rating function.</p>
<p>RatingCurveFunction aggregates multiple RatingCurveSegments and routes.
computation calls to the correct segment based on the water level to compute for.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>RatingCurveSegment, RatingCurveParameters</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveFunction.add_segment">
<span class="sig-name descname"><span class="pre">add_segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveFunction)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)lower</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)c</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveFunction.add_segment" title="Permalink to this definition"></a></dt>
<dd><p>Add a new curve segment with the given parameters.</p>
<blockquote>
<div><dl class="simple">
<dt>See also:</dt><dd><p>RatingCurveSegment</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>add_segment( (RatingCurveFunction)self, (RatingCurveSegment)segment) -&gt; None :</dt><dd><p>Add a new curve segment as a copy of an exting.</p>
<dl class="simple">
<dt>See also:</dt><dd><p>RatingCurveSegment</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveFunction.flow">
<span class="sig-name descname"><span class="pre">flow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveFunction)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(DoubleVector)levels</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DoubleVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveFunction.flow" title="Permalink to this definition"></a></dt>
<dd><p>Compute flow for a range of water levels.</p>
<blockquote>
<div><dl class="simple">
<dt>Args:</dt><dd><p>levels (DoubleVector): Range of water levels to compute flow for.</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>flow( (RatingCurveFunction)self, (object)level) -&gt; float :</dt><dd><p>Compute flow for the given level.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>level (float): Water level to compute flow for.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveFunction.size">
<span class="sig-name descname"><span class="pre">size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveFunction)self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveFunction.size" title="Permalink to this definition"></a></dt>
<dd><p>Get the number of RatingCurveSegments composing the function.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-ratingcurveparameters">
<h4>Class RatingCurveParameters<a class="headerlink" href="#class-ratingcurveparameters" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveParameters">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">RatingCurveParameters</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveParameters" title="Permalink to this definition"></a></dt>
<dd><p>Parameter pack controlling rating level computations.</p>
<p>A parameter pack encapsulates multiple RatingCurveFunction’s with time-points.
When used with a TimeSeries representing level values it maps computations for
each level value onto the correct RatingCurveFunction, which again maps onto the
correct RatingCurveSegment for the level value.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>RatingCurveSegment, RatingCurveFunction, TimeSeries.rating_curve</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveParameters.add_curve">
<span class="sig-name descname"><span class="pre">add_curve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveParameters)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(RatingCurveFunction)curve</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">RatingCurveParameters</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveParameters.add_curve" title="Permalink to this definition"></a></dt>
<dd><p>Add a curve to the parameter pack.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<a class="reference internal" href="#shyft.time_series.RatingCurveFunction" title="shyft.time_series.RatingCurveFunction"><em>RatingCurveFunction</em></a>) – First time-point the curve is valid for.</p></li>
<li><p><strong>curve</strong> (<a class="reference internal" href="#shyft.time_series.RatingCurveFunction" title="shyft.time_series.RatingCurveFunction"><em>RatingCurveFunction</em></a>) – RatingCurveFunction to add at t.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>self.  to allow chaining building functions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.RatingCurveParameters" title="shyft.time_series.RatingCurveParameters">RatingCurveParameters</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveParameters.flow">
<span class="sig-name descname"><span class="pre">flow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveParameters)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(time)t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)level</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveParameters.flow" title="Permalink to this definition"></a></dt>
<dd><p>Compute the flow at a specific time point.</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>t (utctime): Time-point of the level value.</p>
<p>level (float): Level value at t.</p>
</dd>
<dt>Returns:</dt><dd><p>float: flow. Flow correcponding to input level at t, <cite>nan</cite> if level is less than the least water level of the first segment or before the time of the first rating curve function.</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>flow( (RatingCurveParameters)self, (TimeSeries)ts) -&gt; DoubleVector :</dt><dd><p>Compute the flow at a specific time point.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>ts (TimeSeries): Time series of level values.</p>
</dd>
<dt>Returns:</dt><dd><p>DoubleVector: flow. Flow correcponding to the input levels of the time-series, <cite>nan</cite> where the level is less than the least water level of the first segment and for time-points before the first rating curve function.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-ratingcurvesegment">
<h4>Class RatingCurveSegment<a class="headerlink" href="#class-ratingcurvesegment" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegment">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">RatingCurveSegment</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegment" title="Permalink to this definition"></a></dt>
<dd><p>Represent a single rating-curve equation.</p>
<p>The rating curve function is <cite>a*(h - b)^c</cite> where <cite>a</cite>, <cite>b</cite>, and <cite>c</cite> are parameters
for the segment and <cite>h</cite> is the water level to compute flow for. Additionally there
is a <cite>lower</cite> parameter for the least water level the segment is valid for. Seen
separatly a segment is considered valid for any level greater than <cite>lower</cite>.</p>
<p>The function segments are gathered into many <cite>RatingCurveFunction</cite> to represent a
set of different rating functions for different levels.
Related classes are RatingCurveFunction, RatingCurveParameters</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegment.a">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">a</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegment.a" title="Permalink to this definition"></a></dt>
<dd><p>Parameter a</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegment.b">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">b</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegment.b" title="Permalink to this definition"></a></dt>
<dd><p>Parameter b</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegment.c">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">c</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegment.c" title="Permalink to this definition"></a></dt>
<dd><p>Parameter c</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegment.flow">
<span class="sig-name descname"><span class="pre">flow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveSegment)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(DoubleVector)levels</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)i0=0</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">(int)iN=18446744073709551615</span></span></em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DoubleVector</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegment.flow" title="Permalink to this definition"></a></dt>
<dd><p>Compute the flow for a range of water levels</p>
<blockquote>
<div><dl>
<dt>Args:</dt><dd><p>levels (DoubleVector): Vector of water levels</p>
<p>i0 (int): first index to use from levels, defaults to 0</p>
<p>iN (int): first index _not_ to use from levels, defaults to std::size_t maximum.</p>
</dd>
<dt>Returns:</dt><dd><p>DoubleVector: flow. Vector of flow values.</p>
</dd>
</dl>
</div></blockquote>
<dl>
<dt>flow( (RatingCurveSegment)self, (object)level) -&gt; float :</dt><dd><p>Compute the flow for the given water level.</p>
<dl>
<dt>Notes:</dt><dd><p>There is _no_ check to see if level is valid. It’s up to the user to call</p>
<p>with a correct level.</p>
</dd>
<dt>Args:</dt><dd><p>level (float): water level</p>
</dd>
<dt>Returns:</dt><dd><p>double: flow. the flow for the given water level</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegment.lower">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">lower</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegment.lower" title="Permalink to this definition"></a></dt>
<dd><p>Least valid water level. Not mutable after constructing a segment.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegment.valid">
<span class="sig-name descname"><span class="pre">valid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveSegment)self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)level</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span> <span class="pre">:</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegment.valid" title="Permalink to this definition"></a></dt>
<dd><p>Check if a water level is valid for the curve segment</p>
<blockquote>
<div><p>level (float): water level</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>valid. True if level is greater or equal to lower</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-ratingcurvesegments">
<h4>Class RatingCurveSegments<a class="headerlink" href="#class-ratingcurvesegments" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegments">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">RatingCurveSegments</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegments" title="Permalink to this definition"></a></dt>
<dd><p>A typed list of RatingCurveSegment, used to construct RatingCurveParameters.</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegments.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveSegments)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegments.append" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveSegments.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveSegments)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveSegments.extend" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="class-ratingcurvetimefunction">
<h4>Class RatingCurveTimeFunction<a class="headerlink" href="#class-ratingcurvetimefunction" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveTimeFunction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">RatingCurveTimeFunction</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveTimeFunction" title="Permalink to this definition"></a></dt>
<dd><p>Composed of time t and RatingCurveFunction</p>
<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveTimeFunction.f">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">f</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveTimeFunction.f" title="Permalink to this definition"></a></dt>
<dd><p>the rating curve function</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.RatingCurveFunction" title="shyft.time_series.RatingCurveFunction">RatingCurveFunction</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveTimeFunction.t">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">t</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveTimeFunction.t" title="Permalink to this definition"></a></dt>
<dd><p>.f is valid from t, the epoch 1970[s] time</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#shyft.time_series.time" title="shyft.time_series.time">time</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="class-ratingcurvetimefunctions">
<h4>Class RatingCurveTimeFunctions<a class="headerlink" href="#class-ratingcurvetimefunctions" title="Permalink to this headline"></a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveTimeFunctions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shyft.time_series.</span></span><span class="sig-name descname"><span class="pre">RatingCurveTimeFunctions</span></span><a class="headerlink" href="#shyft.time_series.RatingCurveTimeFunctions" title="Permalink to this definition"></a></dt>
<dd><p>A typed list of RatingCurveTimeFunction elements</p>
<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveTimeFunctions.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveTimeFunctions)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveTimeFunctions.append" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shyft.time_series.RatingCurveTimeFunctions.extend">
<span class="sig-name descname"><span class="pre">extend</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">(RatingCurveTimeFunctions)arg1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">(object)arg2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#shyft.time_series.RatingCurveTimeFunctions.extend" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../notebooks/time_series/dtss-krls-container.html" class="btn btn-neutral float-left" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../hydrology/installation.html" class="btn btn-neutral float-right" title="Package shyft" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, The Shyft project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>